# 乐理通 - 音乐入门学习 App 产品设计文档

## 一、产品概述

### 1.1 产品定位

| 项目 | 说明 |
|------|------|
| **App 名称** | 乐理通 (MusicStart) |
| **Slogan** | 从零开始，轻松学音乐 |
| **产品类型** | 教育工具 + 游戏化学习 |
| **目标用户** | 零基础 → 入门级的音乐学习者 |
| **核心价值** | 一个 App 搞定简谱 + 五线谱 + 钢琴基础 |

### 1.2 目标平台

- ✅ Android
- ✅ iOS
- ✅ Web（H5）
- ✅ macOS
- ✅ Windows
- ✅ Linux

---

## 二、用户画像

| 用户类型 | 特征 | 核心需求 | 使用场景 |
|---------|------|---------|---------|
| **零基础小白** | 完全不懂乐理，对音乐有兴趣 | 从头开始，循序渐进 | 闲暇时间自学 |
| **简谱初学者** | 会唱简谱但不会弹奏 | 学五线谱 + 钢琴入门 | 配合学琴使用 |
| **钢琴爱好者** | 想学钢琴但无基础 | 乐理 + 指法 + 简单曲目 | 自学钢琴前置知识 |
| **琴童家长** | 陪孩子学琴，自己不懂 | 了解基础乐理，能辅导孩子 | 辅导孩子练琴 |
| **音乐老师** | 需要教学辅助工具 | 课堂演示、布置作业 | 教学场景 |

---

## 三、功能架构

### 3.1 整体架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                           乐理通 App                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      课程体系                             │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │   │
│  │  │   简谱入门   │→ │  五线谱入门  │→ │  钢琴入门   │      │   │
│  │  │  (10课时)   │  │  (15课时)   │  │  (20课时)  │      │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      练习系统                             │   │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │   │
│  │  │ 识谱练习  │ │ 节奏练习  │ │ 听音练习  │ │ 弹奏练习  │   │   │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      工具箱                               │   │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │   │
│  │  │ 虚拟钢琴  │ │  节拍器   │ │ 乐谱库   │ │ 对照表   │   │   │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      用户系统                             │   │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │   │
│  │  │ 学习进度  │ │ 成就系统  │ │ 练习统计  │ │  设置    │   │   │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 底部导航结构

```
┌────────────┬────────────┬────────────┬────────────┐
│    🏠      │     📚     │     🎯     │     👤     │
│    首页    │    课程     │    练习    │    我的    │
└────────────┴────────────┴────────────┴────────────┘
```

---

## 四、课程体系设计

### 4.1 简谱入门（10课时）

| 课时 | 课程标题 | 学习内容 | 教学形式 | 时长 |
|------|---------|---------|---------|------|
| 1 | 走进音乐世界 | 什么是音乐？声音的高低 | 动画 + 音频演示 | 5min |
| 2 | 认识 Do Re Mi | 1 2 3 三个音的认识 | 听音 + 跟唱 | 8min |
| 3 | 七个音符朋友 | 完整的 1234567 | 互动练习 | 10min |
| 4 | 音乐的心跳 | 节奏概念、拍子是什么 | 节拍器 + 拍手练习 | 8min |
| 5 | 长音和短音 | 全音符、二分、四分、八分音符 | 动画演示 + 练习 | 10min |
| 6 | 音符的小尾巴 | 附点音符、连音线 | 图解 + 练习 | 8min |
| 7 | 升高和降低 | 升降音 #/b 的概念 | 钢琴对照演示 | 8min |
| 8 | 高音和低音 | 高八度、低八度标记 | 键盘对照 | 8min |
| 9 | 唱一首歌吧（上） | 《小星星》完整学习 | 逐句教学 + 跟唱 | 12min |
| 10 | 唱一首歌吧（下） | 《欢乐颂》完整学习 | 逐句教学 + 跟唱 | 12min |

### 4.2 五线谱入门（15课时）

| 课时 | 课程标题 | 学习内容 | 教学形式 | 时长 |
|------|---------|---------|---------|------|
| 1 | 五线谱的诞生 | 五线谱历史、基本结构 | 图文动画 | 6min |
| 2 | 认识五条线 | 线、间、加线的概念 | 互动标注 | 8min |
| 3 | 高音谱号 | G谱号的由来和位置 | 动画 + 描摹 | 8min |
| 4 | 线上的音符 | E G B D F 五个音 | 口诀记忆 + 练习 | 10min |
| 5 | 间上的音符 | F A C E 四个音 | 口诀记忆 + 练习 | 10min |
| 6 | 找到中央C | 中央C的位置和意义 | 键盘对照 | 8min |
| 7 | 简谱对照五线谱 | 建立两种谱的映射 | 双谱对照练习 | 12min |
| 8 | 音符的时值 | 五线谱中的音符形状 | 图解对比 | 10min |
| 9 | 休止符 | 各种休止符的认识 | 节奏练习 | 8min |
| 10 | 低音谱号 | F谱号的认识 | 动画 + 练习 | 10min |
| 11 | 低音谱号的音 | 低音谱表的音位 | 口诀 + 练习 | 10min |
| 12 | 升降号 | 五线谱中的升降记号 | 对照练习 | 8min |
| 13 | 调号入门 | 常见调号的认识 | 图解 + 练习 | 10min |
| 14 | 读谱实战（上） | 《小星星》五线谱版 | 视奏练习 | 12min |
| 15 | 读谱实战（下） | 《欢乐颂》五线谱版 | 视奏练习 | 12min |

### 4.3 钢琴入门（20课时）

| 课时 | 课程标题 | 学习内容 | 教学形式 | 时长 |
|------|---------|---------|---------|------|
| 1 | 认识钢琴 | 钢琴的结构、键盘布局 | 互动键盘 | 8min |
| 2 | 黑键和白键 | 黑白键的规律 | 动画演示 | 8min |
| 3 | 找到中央C | 在键盘上找到中央C | 互动练习 | 6min |
| 4 | 坐姿和手型 | 正确的弹奏姿势 | 视频 + 图示 | 10min |
| 5 | 五指位置 | C位置的五指放置 | 跟弹练习 | 10min |
| 6 | 右手单音 | 右手弹 1-5 | 虚拟键盘练习 | 12min |
| 7 | 右手音阶 | 右手弹完整音阶 | 跟弹练习 | 12min |
| 8 | 左手单音 | 左手弹 1-5 | 虚拟键盘练习 | 12min |
| 9 | 左手音阶 | 左手弹完整音阶 | 跟弹练习 | 12min |
| 10 | 简单节奏型 | 基本的节奏弹奏 | 节奏练习 | 10min |
| 11 | 双手预备 | 双手同时放在键盘上 | 姿势练习 | 8min |
| 12 | 双手齐奏 | 双手同时弹同样的音 | 跟弹练习 | 12min |
| 13 | 右手旋律+左手长音 | 最简单的双手配合 | 分手→合手 | 15min |
| 14 | 曲目练习1 | 《小星星》双手版 | 分句练习 | 15min |
| 15 | 曲目练习2 | 《欢乐颂》简化版 | 分句练习 | 15min |
| 16 | 曲目练习3 | 《生日快乐》 | 完整练习 | 15min |
| 17 | 曲目练习4 | 《两只老虎》 | 完整练习 | 15min |
| 18 | 基础乐理复习 | 音阶、和弦初步 | 理论 + 练习 | 12min |
| 19 | 练习方法指导 | 如何高效练琴 | 方法讲解 | 10min |
| 20 | 结业测试 | 综合能力测试 | 测验 | 20min |

---

## 五、练习系统设计

### 5.1 识谱练习

#### 5.1.1 简谱识别

```
┌─────────────────────────────────────────┐
│                                         │
│         🎵 听一听，这是哪个音？           │
│                                         │
│              🔊 播放音频                 │
│                                         │
│    ┌───┐  ┌───┐  ┌───┐  ┌───┐        │
│    │ 1 │  │ 2 │  │ 3 │  │ 4 │        │
│    └───┘  └───┘  └───┘  └───┘        │
│                                         │
│    ┌───┐  ┌───┐  ┌───┐               │
│    │ 5 │  │ 6 │  │ 7 │               │
│    └───┘  └───┘  └───┘               │
│                                         │
│         第 3/10 题    正确率 80%         │
│                                         │
└─────────────────────────────────────────┘
```

#### 5.1.2 五线谱识别

```
┌─────────────────────────────────────────┐
│                                         │
│  ┌──────────────────────────────────┐  │
│  │  🎼 ━━━━━━━━━━━━━━━━━━━━━━━━━━━  │  │
│  │     ━━━━━━●━━━━━━━━━━━━━━━━━━━  │  │
│  │     ━━━━━━━━━━━━━━━━━━━━━━━━━━  │  │
│  │     ━━━━━━━━━━━━━━━━━━━━━━━━━━  │  │
│  │     ━━━━━━━━━━━━━━━━━━━━━━━━━━  │  │
│  └──────────────────────────────────┘  │
│                                         │
│           这个音符对应简谱？              │
│                                         │
│    ┌───┐  ┌───┐  ┌───┐  ┌───┐        │
│    │ 5 │  │ 6 │  │ 7 │  │ 1 │        │
│    └───┘  └───┘  └───┘  └───┘        │
│                                         │
└─────────────────────────────────────────┘
```

#### 5.1.3 双谱对照

```
┌─────────────────────────────────────────┐
│                                         │
│  五线谱：                                │
│  ┌──────────────────────────────────┐  │
│  │  🎼 ━━●━━━━●━━━━●━━━━●━━━━━━━━━  │  │
│  │     ━━━━━━━━━━━━━━━━━━━━━━━━━━  │  │
│  │     ━━━━━━━━━━━━━━━━━━━━━━━━━━  │  │
│  └──────────────────────────────────┘  │
│                                         │
│  请选择对应的简谱：                       │
│                                         │
│  A: 1  2  3  4                          │
│  B: 3  4  5  6                          │
│  C: 5  6  7  1                          │
│  D: 1  3  5  7                          │
│                                         │
└─────────────────────────────────────────┘
```

### 5.2 节奏练习

```
┌─────────────────────────────────────────┐
│                                         │
│     🥁 跟着节拍敲击屏幕                  │
│                                         │
│     ♩    ♩    ♪ ♪   ♩                  │
│                                         │
│     1    2    3 &   4                   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                  │   │
│  │        👆 点击这里打节拍 👆       │   │
│  │                                  │   │
│  └─────────────────────────────────┘   │
│                                         │
│     ●    ●    ● ●   ◌                  │
│    完美  完美  完美   等待                │
│                                         │
│          BPM: 80    得分: 95           │
│                                         │
└─────────────────────────────────────────┘
```

### 5.3 弹奏练习

```
┌─────────────────────────────────────────┐
│                                         │
│  🎼 请弹奏以下旋律：                      │
│                                         │
│  ┌──────────────────────────────────┐  │
│  │     1   1 │ 5   5 │ 6   6 │ 5 - │  │
│  │  一闪一闪   亮晶晶                  │  │
│  └──────────────────────────────────┘  │
│                                         │
│  ┌──────────────────────────────────┐  │
│  │  ┌─┐ ┌─┐   ┌─┐ ┌─┐ ┌─┐         │  │
│  │  └┬┘ └┬┘   └┬┘ └┬┘ └┬┘         │  │
│  │ ┌─┴┬──┴┬────┴┬──┴┬──┴┬────┬──┐ │  │
│  │ │C │ D │ E  │ F │ G │ A  │ B │ │  │
│  │ │1 │ 2 │ 3  │ 4 │ 5 │ 6  │ 7 │ │  │
│  │ └──┴───┴────┴───┴───┴────┴───┘ │  │
│  └──────────────────────────────────┘  │
│                                         │
│     当前：1  正确！✓   进度：2/8        │
│                                         │
└─────────────────────────────────────────┘
```

### 5.4 练习难度等级

| 等级 | 名称 | 内容范围 |
|------|------|---------|
| ⭐ | 入门 | 中央C附近一个八度，基本节奏 |
| ⭐⭐ | 初级 | 两个八度，附点节奏 |
| ⭐⭐⭐ | 进阶 | 加入升降音，切分节奏 |
| ⭐⭐⭐⭐ | 中级 | 快速识谱，复杂节奏 |
| ⭐⭐⭐⭐⭐ | 高级 | 视奏能力，双手配合 |

---

## 六、工具箱设计

### 6.1 虚拟钢琴

```
┌─────────────────────────────────────────────────────────────┐
│                        🎹 虚拟钢琴                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  显示设置：  [简谱] [音名] [无]     键数：[61键] [88键]       │
│                                                             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │                                                       │  │
│  │    ┌─┐ ┌─┐   ┌─┐ ┌─┐ ┌─┐   ┌─┐ ┌─┐   ┌─┐ ┌─┐ ┌─┐   │  │
│  │    │ │ │ │   │ │ │ │ │ │   │ │ │ │   │ │ │ │ │ │   │  │
│  │    │ │ │ │   │ │ │ │ │ │   │ │ │ │   │ │ │ │ │ │   │  │
│  │    └┬┘ └┬┘   └┬┘ └┬┘ └┬┘   └┬┘ └┬┘   └┬┘ └┬┘ └┬┘   │  │
│  │  ┌──┴┬──┴┬────┴┬──┴┬──┴┬────┴┬──┴┬────┴┬──┴┬──┴┬───┐│  │
│  │  │ C │ D │ E  │ F │ G │ A  │ B │ C  │ D │ E │ F ││  │
│  │  │ 1 │ 2 │ 3  │ 4 │ 5 │ 6  │ 7 │ 1' │ 2'│ 3'│ 4'││  │
│  │  └───┴───┴────┴───┴───┴────┴───┴────┴───┴───┴───┘│  │
│  │                     ↑ 中央C                        │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                             │
│  [🔴 录制]  [⏸ 暂停]  [▶️ 播放]  [🗑 清除]                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**功能特性**：
- 支持多点触控（和弦）
- 可显示简谱/音名标记
- 录制和回放功能
- 音色选择（钢琴/电钢琴/风琴）
- 键盘可滑动查看完整音域

### 6.2 节拍器

```
┌─────────────────────────────────────────┐
│              🥁 节拍器                   │
├─────────────────────────────────────────┤
│                                         │
│              ┌─────────┐                │
│              │         │                │
│              │   120   │  BPM           │
│              │         │                │
│              └─────────┘                │
│           [-10] [-1] [+1] [+10]         │
│                                         │
│                  ●                      │
│               ╱     ╲                   │
│              ●       ●                  │
│               ╲     ╱                   │
│                  ●                      │
│                                         │
│  拍号：  [2/4]  [3/4]  [4/4]  [6/8]     │
│                                         │
│  强弱：  [● ○ ○ ○]  四四拍               │
│                                         │
│        ┌──────────────────┐             │
│        │    ▶️  开始       │             │
│        └──────────────────┘             │
│                                         │
└─────────────────────────────────────────┘
```

**功能特性**：
- 速度可调（20-240 BPM）
- 多种拍号选择
- 可视化节拍指示
- 音效可选（木鱼/电子/鼓声）
- 渐进练习模式（自动加速）

### 6.3 乐谱库

```
┌─────────────────────────────────────────┐
│              📚 乐谱库                   │
├─────────────────────────────────────────┤
│                                         │
│  [全部] [入门] [初级] [中级] [收藏]       │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🎵 小星星                        │   │
│  │ 难度：⭐  |  简谱 ✓  五线谱 ✓    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🎵 欢乐颂                        │   │
│  │ 难度：⭐⭐  |  简谱 ✓  五线谱 ✓  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🎵 生日快乐                      │   │
│  │ 难度：⭐  |  简谱 ✓  五线谱 ✓    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🎵 两只老虎                      │   │
│  │ 难度：⭐  |  简谱 ✓  五线谱 ✓    │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

### 6.4 音符对照表

```
┌─────────────────────────────────────────┐
│            📋 音符对照表                 │
├─────────────────────────────────────────┤
│                                         │
│  调号选择：[C大调] [G大调] [F大调] ...    │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  简谱  │  音名  │  五线谱位置     │   │
│  ├────────┼────────┼────────────────┤   │
│  │   1    │   C    │  下加一线       │   │
│  │   2    │   D    │  下加一间       │   │
│  │   3    │   E    │  第一线        │   │
│  │   4    │   F    │  第一间        │   │
│  │   5    │   G    │  第二线        │   │
│  │   6    │   A    │  第二间        │   │
│  │   7    │   B    │  第三线        │   │
│  │  1'    │  C'    │  第三间        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  点击任意行可听到对应音高 🔊             │
│                                         │
└─────────────────────────────────────────┘
```

---

## 七、页面结构（信息架构）

```
App
├── 启动页 (SplashPage)
├── 引导页 (OnboardingPage) - 首次使用
│
├── 主框架 (MainFrame) - 底部导航
│   │
│   ├── 🏠 首页 Tab (HomePage)
│   │   ├── 今日任务卡片
│   │   ├── 学习地图（课程进度）
│   │   ├── 继续学习入口
│   │   └── 推荐练习
│   │
│   ├── 📚 课程 Tab (CoursePage)
│   │   ├── 课程分类（简谱/五线谱/钢琴）
│   │   ├── 课程列表页 (CourseListPage)
│   │   ├── 课程详情页 (CourseDetailPage)
│   │   └── 课程学习页 (CourseLearningPage)
│   │       ├── 图文课程
│   │       ├── 视频课程
│   │       └── 互动课程
│   │
│   ├── 🎯 练习 Tab (PracticePage)
│   │   ├── 练习类型选择
│   │   │   ├── 识谱练习
│   │   │   ├── 节奏练习
│   │   │   ├── 听音练习
│   │   │   └── 弹奏练习
│   │   ├── 练习进行页 (PracticePlayPage)
│   │   └── 练习结果页 (PracticeResultPage)
│   │
│   └── 👤 我的 Tab (ProfilePage)
│       ├── 用户信息
│       ├── 学习统计 (StatisticsPage)
│       ├── 成就徽章 (AchievementPage)
│       ├── 收藏夹 (FavoritesPage)
│       └── 设置 (SettingsPage)
│
├── 工具（可从多处进入）
│   ├── 虚拟钢琴 (PianoPage)
│   ├── 节拍器 (MetronomePage)
│   ├── 乐谱库 (SheetMusicPage)
│   ├── 乐谱详情 (SheetDetailPage)
│   └── 对照表 (ReferenceTablePage)
│
└── 通用组件
    ├── 五线谱渲染组件 (StaffWidget)
    ├── 钢琴键盘组件 (PianoKeyboardWidget)
    ├── 节拍器组件 (MetronomeWidget)
    ├── 音频播放器组件 (AudioPlayerWidget)
    └── 进度指示器组件 (ProgressWidget)
```

---

## 八、数据模型设计

### 8.1 用户模型

```dart
/// 用户信息
class UserModel {
  final String id;
  final String nickname;
  final String? avatar;
  final int totalStudyMinutes;     // 总学习时长（分钟）
  final int consecutiveDays;       // 连续学习天数
  final int totalPracticeCount;    // 总练习次数
  final int correctCount;          // 总正确数
  final DateTime createdAt;
  final DateTime lastActiveAt;
}

/// 用户设置
class UserSettings {
  final String themeMode;          // light / dark / system
  final bool soundEnabled;
  final bool vibrationEnabled;
  final String reminderTime;       // 每日提醒时间
  final bool reminderEnabled;
}
```

### 8.2 课程模型

```dart
/// 课程分类
class CourseCategory {
  final String id;
  final String name;               // 简谱入门 / 五线谱入门 / 钢琴入门
  final String icon;
  final int totalLessons;
  final int completedLessons;
}

/// 课程
class CourseModel {
  final String id;
  final String categoryId;
  final int order;                 // 课程顺序
  final String title;
  final String description;
  final String type;               // video / text / interactive
  final int durationMinutes;
  final bool isLocked;
  final bool isCompleted;
}

/// 课程内容
class LessonContent {
  final String lessonId;
  final List<ContentBlock> blocks; // 内容块列表
}

/// 内容块（图文/视频/互动）
class ContentBlock {
  final String type;               // text / image / video / quiz / interactive
  final Map<String, dynamic> data;
}
```

### 8.3 练习模型

```dart
/// 练习类型
enum PracticeType {
  noteRecognition,    // 音符识别
  rhythmTapping,      // 节奏敲击
  earTraining,        // 听音辨别
  pianoPlaying,       // 弹奏练习
}

/// 练习题目
class PracticeQuestion {
  final String id;
  final PracticeType type;
  final int difficulty;            // 难度 1-5
  final Map<String, dynamic> question;  // 题目内容
  final dynamic correctAnswer;
  final List<dynamic>? options;    // 选项（如果是选择题）
}

/// 练习记录
class PracticeRecord {
  final String odatetime;
  final PracticeType type;
  final int difficulty;
  final int totalQuestions;
  final int correctCount;
  final int durationSeconds;
  final DateTime practiceAt;
}
```

### 8.4 音乐模型

```dart
/// 音符
class NoteModel {
  final String name;               // C4, D4, E4...
  final int midiNumber;            // MIDI 编号
  final int octave;                // 八度
  final String jianpu;             // 简谱表示 "1", "2", "#1"
  final int staffPosition;         // 五线谱位置
  final String clef;               // treble / bass
}

/// 节奏型
class RhythmPattern {
  final String id;
  final String name;
  final List<double> beats;        // 节拍时值列表
  final int difficulty;
}

/// 乐谱
class SheetMusic {
  final String id;
  final String title;
  final String? composer;
  final int difficulty;
  final String jianpuData;         // 简谱数据
  final String? staffData;         // 五线谱数据
  final String? audioUrl;          // 示范音频
  final bool isFavorite;
}
```

### 8.5 成就模型

```dart
/// 成就
class Achievement {
  final String id;
  final String name;
  final String description;
  final String icon;
  final String condition;          // 达成条件描述
  final bool isUnlocked;
  final DateTime? unlockedAt;
}

/// 成就类型示例
/*
- 初次启程：完成第一节课
- 坚持不懈：连续学习7天
- 千里之行：完成1000道练习题
- 火眼金睛：识谱正确率达到95%
- 节奏大师：节奏练习满分
- 小星星：完成《小星星》弹奏
- 毕业典礼：完成全部课程
*/
```

---

## 九、技术实现要点

### 9.1 核心组件

| 组件 | 功能 | 技术方案 |
|------|------|---------|
| **五线谱渲染** | 渲染五线谱、音符、谱号 | CustomPainter 自绘 |
| **钢琴键盘** | 虚拟钢琴、多点触控 | GestureDetector + 音频 |
| **音频播放** | 播放音符、示范音频 | just_audio / audioplayers |
| **节拍器** | 精准节拍、可视化 | Timer + 音频 |
| **MIDI支持** | 外接MIDI键盘（预留） | flutter_midi |

### 9.2 数据存储

| 数据类型 | 存储方案 |
|---------|---------|
| 用户设置 | SharedPreferences |
| 学习进度 | Hive |
| 练习记录 | Hive |
| 课程内容 | 本地 JSON + 远程更新 |
| 乐谱数据 | 本地 JSON |
| 音频文件 | Assets / 缓存 |

### 9.3 音频资源

需要准备的音频：
- 88个钢琴音（C1-C8）
- 节拍器音效
- 正确/错误提示音
- 示范曲目音频

---

## 十、开发计划

### 10.1 MVP 版本（v1.0）

| 阶段 | 内容 | 预计时间 |
|------|------|---------|
| P1 | 项目搭建、基础架构 | 1周 |
| P2 | 虚拟钢琴组件 | 1周 |
| P3 | 五线谱渲染组件 | 1周 |
| P4 | 简谱入门课程（5课） | 1周 |
| P5 | 基础识谱练习 | 1周 |
| P6 | 我的模块、数据持久化 | 1周 |

**MVP 功能**：
- ✅ 虚拟钢琴（可弹奏）
- ✅ 简谱入门（5课）
- ✅ 识谱练习（简谱）
- ✅ 学习进度记录

### 10.2 完整版本（v2.0）

- 全部 45 节课程
- 五线谱渲染和练习
- 节奏练习
- 弹奏练习
- 节拍器工具
- 乐谱库
- 成就系统
- 数据统计

---

## 十一、待确认问题

1. **App 名称**：乐理通 / MusicStart / 其他？
2. **课程是否需要付费/VIP 模式**？
3. **是否需要用户登录/云同步**？
4. **是否需要社区/分享功能**？
5. **首发平台优先级**？

---

*文档版本：v1.0*  
*更新时间：2024年*

