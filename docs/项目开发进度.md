# ä¹ç†é€š - é¡¹ç›®å¼€å‘è¿›åº¦

> ğŸ“… æœ€åæ›´æ–°ï¼š2026-01-15

---

## ä¸€ã€æ•´ä½“è¿›åº¦

| æ¨¡å— | å®Œæˆåº¦ | çŠ¶æ€ | è¯´æ˜ |
|------|--------|------|------|
| é¡¹ç›®æ¶æ„ | 100% | âœ… å®Œæˆ | GetX + åˆ†å±‚æ¶æ„ |
| æ ¸å¿ƒæœåŠ¡å±‚ | 100% | âœ… å®Œæˆ | éŸ³é¢‘ã€ç½‘ç»œã€å­˜å‚¨ã€ä¸»é¢˜ |
| éŸ³é¢‘èµ„æº | 100% | âœ… å®Œæˆ | 88é”®é’¢ç´éŸ³ + éŸ³æ•ˆ |
| è¯¾ç¨‹åŠŸèƒ½ | 100% | âœ… å®Œæˆ | 3å¥—è¯¾ç¨‹ + æŒä¹…åŒ– |
| ç»ƒä¹ åŠŸèƒ½ | 100% | âœ… å®Œæˆ | 4ç§ç»ƒä¹  + æŒä¹…åŒ– |
| å·¥å…·åŠŸèƒ½ | 75% | ğŸ”„ è¿›è¡Œä¸­ | æ’­æ”¾å™¨å®Œæˆï¼Œè®¾ç½®ç¼ºå¤± |
| ä¸ªäººä¸­å¿ƒ | 70% | ğŸ”„ è¿›è¡Œä¸­ | ç»Ÿè®¡å®Œæˆï¼Œè®¾ç½®ä¸å®Œæ•´ |
| ä¹è°±ç³»ç»Ÿ | 90% | âœ… åŸºæœ¬å®Œæˆ | æ’­æ”¾+å¯¼å‡ºå®Œæˆï¼Œç¼–è¾‘å™¨å¾…åš |
| **è®¾ç½®ä¸æŒä¹…åŒ–** | 50% | ğŸ”„ è¿›è¡Œä¸­ | æ ¸å¿ƒå·²åšï¼Œå·¥å…·è®¾ç½®ç¼ºå¤± |

---

## äºŒã€æŒä¹…åŒ–åŠŸèƒ½å®ç°æƒ…å†µ

### 2.1 å·²å®ç°æŒä¹…åŒ– âœ…

| åŠŸèƒ½æ¨¡å— | å­˜å‚¨å†…å®¹ | å­˜å‚¨æ–¹æ¡ˆ | æ–‡ä»¶ä½ç½® |
|---------|---------|---------|---------|
| **è®¤è¯ç³»ç»Ÿ** | Tokenã€ç”¨æˆ·ä¿¡æ¯ | SharedPreferences + Hive | `features/auth/services/auth_service.dart` |
| **ä¸»é¢˜è®¾ç½®** | æ·±è‰²æ¨¡å¼å¼€å…³ | SharedPreferences | `core/theme/theme_controller.dart` |
| **å­¦ä¹ ç»Ÿè®¡** | æ¯æ—¥è®°å½•ã€æ€»ç»Ÿè®¡ã€æˆå°± | Hive (cache_box) | `features/profile/repositories/profile_repository.dart` |
| **ç»ƒä¹ è®°å½•** | ç»ƒä¹ æ•°æ®ã€ç­”é¢˜è¯¦æƒ…ã€ç»Ÿè®¡ | Hive (cache_box) | `features/practice/repositories/practice_repository.dart` |
| **è¯¾ç¨‹è¿›åº¦** | è¯¾ç¨‹è¿›åº¦ã€è¯¾æ—¶è¿›åº¦ | SharedPreferences | `features/course/repositories/course_repository.dart` |

**æŒä¹…åŒ–å®Œæˆåº¦**ï¼šæ ¸å¿ƒå­¦ä¹ æ•°æ® 100% âœ…

### 2.2 æœªå®ç°æŒä¹…åŒ– âŒ

| åŠŸèƒ½æ¨¡å— | ç¼ºå¤±å†…å®¹ | ä¼˜å…ˆçº§ | å½±å“ |
|---------|---------|--------|------|
| **é’¢ç´å·¥å…·** | éŸ³åŸŸèŒƒå›´ã€æ ‡ç­¾è®¾ç½®ã€ä¸»é¢˜ã€å½•åˆ¶æ•°æ® | P1 é«˜ | æ¯æ¬¡æ‰“å¼€éœ€é‡è®¾ |
| **èŠ‚æ‹å™¨** | BPMã€æ‹å·ã€ä¸»é¢˜ | P1 é«˜ | æ¯æ¬¡æ‰“å¼€éœ€é‡è®¾ |
| **å£°éŸ³è®¾ç½®** | éŸ³æ•ˆå¼€å…³ã€æ•ˆæœéŸ³å¼€å…³ | P1 é«˜ | æ— æ³•è®°ä½ç”¨æˆ·åå¥½ |
| **ä¹è°±æ’­æ”¾å™¨** | æ’­æ”¾é€Ÿåº¦ã€æ˜¾ç¤ºæ¨¡å¼ | P2 ä¸­ | ç”¨æˆ·ä½“éªŒæ‰“æŠ˜ |
| **è¯­è¨€è®¾ç½®** | å¤šè¯­è¨€åˆ‡æ¢ | P2 ä¸­ | å·²å®šä¹‰é”®ä½†æœªä½¿ç”¨ |
| **å¼•å¯¼é¡µ** | é¦–æ¬¡å¯åŠ¨æ ‡è®° | P3 ä½ | é‡å¤æ˜¾ç¤ºå¼•å¯¼ |

**æŒä¹…åŒ–ç¼ºå¤±åº¦**ï¼šå·¥å…·è®¾ç½® 0%ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ âš ï¸

### 2.3 å­˜å‚¨æ¶æ„

```
core/storage/
â”œâ”€â”€ storage_service.dart      # ç»Ÿä¸€å­˜å‚¨æ¥å£ï¼ˆå·²å®ç°ï¼‰
â”œâ”€â”€ hive_boxes.dart           # Hive Box ç®¡ç†ï¼ˆå·²å®ç°ï¼‰
â””â”€â”€ settings_manager.dart     # è®¾ç½®ç®¡ç†å™¨ï¼ˆå¾…åˆ›å»ºï¼‰âŒ

shared/constants/
â””â”€â”€ storage_keys.dart          # å­˜å‚¨é”®å®šä¹‰ï¼ˆéƒ¨åˆ†é”®æœªä½¿ç”¨ï¼‰

Hive Boxes:
- user_box:     ç”¨æˆ·ä¿¡æ¯ âœ…
- cache_box:    å­¦ä¹ æ•°æ®ã€ç»ƒä¹ è®°å½• âœ…
- settings_box: å·¥å…·è®¾ç½®ï¼ˆæœªå……åˆ†ä½¿ç”¨ï¼‰âŒ
```

---

## ä¸‰ã€è®¾ç½®é¡µé¢å®ç°æƒ…å†µ

### 3.1 è®¾ç½®é¡µé¢æ¨¡å—åˆ†è§£

**æ–‡ä»¶ä½ç½®**ï¼š`features/profile/views/settings_page.dart`

| è®¾ç½®æ¨¡å— | UI | åŠŸèƒ½å®ç° | æŒä¹…åŒ– | å®Œæˆåº¦ | çŠ¶æ€ |
|---------|-----|---------|--------|--------|------|
| **å¤–è§‚è®¾ç½®** |
| â”œâ”€ æ·±è‰²æ¨¡å¼ | âœ… | âœ… | âœ… | 100% | âœ… å®Œæˆ |
| â””â”€ ä¸»é¢˜è‰²é€‰æ‹© | âœ… | âŒ | âŒ | 30% | ğŸ“‹ å¾…å®ç° |
| **å£°éŸ³è®¾ç½®** |
| â”œâ”€ é’¢ç´éŸ³æ•ˆ | âœ… | âŒ | âŒ | 30% | ğŸ“‹ å¾…å®ç° |
| â””â”€ æ•ˆæœéŸ³ | âœ… | âŒ | âŒ | 30% | ğŸ“‹ å¾…å®ç° |
| **æ•°æ®ç®¡ç†** |
| â”œâ”€ å¯¼å‡ºæ•°æ® | âœ… | âŒ | N/A | 30% | ğŸ“‹ å¾…å®ç° |
| â”œâ”€ å¯¼å…¥æ•°æ® | âœ… | âŒ | N/A | 30% | ğŸ“‹ å¾…å®ç° |
| â””â”€ æ¸…é™¤æ•°æ® | âœ… | âœ… | N/A | 100% | âœ… å®Œæˆ |
| **å…³äº** |
| â”œâ”€ ç‰ˆæœ¬å· | âœ… | âš ï¸ ç¡¬ç¼–ç  | N/A | 50% | ğŸ”„ æ”¹è¿› |
| â”œâ”€ ç”¨æˆ·åè®® | âœ… | âŒ | N/A | 30% | ğŸ“‹ å¾…å®ç° |
| â”œâ”€ éšç§æ”¿ç­– | âœ… | âŒ | N/A | 30% | ğŸ“‹ å¾…å®ç° |
| â””â”€ å¸®åŠ©åé¦ˆ | âœ… | âŒ | N/A | 30% | ğŸ“‹ å¾…å®ç° |

**è®¾ç½®é¡µé¢æ€»å®Œæˆåº¦**ï¼š45%ï¼ˆä»…æ·±è‰²æ¨¡å¼å’Œæ¸…é™¤æ•°æ®å®Œæ•´ï¼‰

### 3.2 å·¥å…·è®¾ç½®é›†æˆåº¦

| å·¥å…· | è®¾ç½®é¡¹æ•°é‡ | æŒä¹…åŒ–æ•°é‡ | å®Œæˆåº¦ | çŠ¶æ€ |
|------|----------|----------|--------|------|
| è™šæ‹Ÿé’¢ç´ | 5é¡¹ | 0é¡¹ | 0% | âŒ æ— æŒä¹…åŒ– |
| èŠ‚æ‹å™¨ | 3é¡¹ | 0é¡¹ | 0% | âŒ æ— æŒä¹…åŒ– |
| ä¹è°±æ’­æ”¾å™¨ | 2é¡¹ | 0é¡¹ | 0% | âŒ æ— æŒä¹…åŒ– |

---

## å››ã€ä¹è°±ç³»ç»Ÿ Canvas é‡æ„ - å·²å®Œæˆ âœ…

### 4.1 é‡æ„æˆæœ

**æ¶æ„å‡çº§**ï¼š
- âœ… å®Œå…¨åŸºäº Canvas çš„ç»Ÿä¸€æ¸²æŸ“ç³»ç»Ÿ
- âœ… æ”¯æŒç®€è°±ï¼ˆJianpuï¼‰å’Œäº”çº¿è°±ï¼ˆGrand Staffï¼‰åŒé‡æ˜¾ç¤º
- âœ… æ”¯æŒé’¢ç´å¤§è°±è¡¨ï¼ˆé«˜éŸ³è°±å· + ä½éŸ³è°±å·ï¼‰
- âœ… é’¢ç´é”®ç›˜ä½¿ç”¨ Canvas æ¸²æŸ“ï¼Œä¸ä¹è°±åƒç´ çº§ç²¾ç¡®å¯¹é½
- âœ… å·¦å³æ‰‹é¢œè‰²åŒºåˆ†ï¼ˆçº¢è‰²å³æ‰‹ã€è“è‰²å·¦æ‰‹ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… å¤šè½¨æ”¯æŒï¼ˆTrackï¼‰ï¼šå·¦æ‰‹/å³æ‰‹ç‹¬ç«‹è½¨é“
- âœ… Beat-based æ—¶é—´æ¨¡å‹ï¼šç²¾ç¡®çš„æ‹å†…éŸ³ç¬¦æ§åˆ¶
- âœ… å’Œå¼¦æ”¯æŒï¼š
  - é•¿æ—¶å€¼éŸ³ç¬¦ï¼ˆå››åˆ†ã€äºŒåˆ†ï¼‰â†’ åŒæ—¶æ¼”å¥ï¼Œå‚ç›´æ’åˆ—
  - çŸ­æ—¶å€¼éŸ³ç¬¦ï¼ˆå…«åˆ†ã€åå…­åˆ†ï¼‰â†’ é¡ºåºæ¼”å¥ï¼Œæ°´å¹³æ’åˆ—
- âœ… è‡ªåŠ¨å¸ƒå±€å¼•æ“ï¼šåŠ¨æ€è®¡ç®—éŸ³ç¬¦ä½ç½®ã€å°èŠ‚åˆ†è¡Œ
- âœ… æ’­æ”¾åŒæ­¥ï¼šéŸ³ç¬¦é«˜äº®ã€æ’­æ”¾æŒ‡ç¤ºçº¿ã€é’¢ç´é”®ç›˜åŒæ­¥
- âœ… å¯¼å‡ºåŠŸèƒ½ï¼š
  - PDF å¯¼å‡ºï¼ˆç®€è°±/äº”çº¿è°±ï¼‰
  - MIDI å¯¼å‡ºï¼ˆæ”¯æŒå’Œå¼¦/é¡ºåºæ¼”å¥ï¼‰

**æ•°æ®æ ¼å¼**ï¼š
- âœ… å®Œå–„çš„ JSON æ ¼å¼è§„èŒƒ
- âœ… æ”¯æŒ MIDI pitch å€¼ï¼ˆ21-108ï¼‰
- âœ… æ”¯æŒå¤šç§æ—¶å€¼ï¼ˆwhole, half, quarter, eighth, sixteenthï¼‰
- âœ… æ”¯æŒé™„ç‚¹ã€ä¸´æ—¶å˜éŸ³è®°å·ã€æ­Œè¯ã€è¿éŸ³çº¿

### 4.2 æŠ€æœ¯äº®ç‚¹

1. **æ™ºèƒ½æ¼”å¥é€»è¾‘**ï¼š
   ```dart
   // æ ¹æ® beamCount è‡ªåŠ¨åˆ¤æ–­æ¼”å¥æ–¹å¼
   if (note.duration.beamCount > 0) {
     // çŸ­æ—¶å€¼ï¼šé¡ºåºæ¼”å¥ï¼ˆå¦‚å…«åˆ†éŸ³ç¬¦ï¼‰
   } else {
     // é•¿æ—¶å€¼ï¼šåŒæ—¶æ¼”å¥ï¼ˆå¦‚å››åˆ†éŸ³ç¬¦å’Œå¼¦ï¼‰
   }
   ```

2. **ä¸‰å±‚æ¶æ„**ï¼š
   - æ•°æ®å±‚ï¼ˆScore/Track/Measure/Beat/Noteï¼‰
   - å¸ƒå±€å±‚ï¼ˆLayoutEngine è®¡ç®—ä½ç½®å’Œæ—¶é—´ï¼‰
   - æ¸²æŸ“å±‚ï¼ˆCustomPainter ç»˜åˆ¶ï¼‰

3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - Canvas æ¸²æŸ“ï¼Œ60fps æµç•…
   - è‡ªé€‚åº”å¸ƒå±€ï¼ˆæ ¹æ®éŸ³ç¬¦å¯†åº¦è°ƒæ•´é—´è·ï¼‰
   - å¢é‡æ›´æ–°ï¼ˆä»…é‡ç»˜å˜åŒ–éƒ¨åˆ†ï¼‰

### 4.3 å·²å®ç°çš„æ–‡ä»¶

**æ ¸å¿ƒæ¨¡å‹**ï¼š
- `lib/features/tools/sheet_music/models/score.dart` - æ•°æ®æ¨¡å‹
- `lib/features/tools/sheet_music/models/enums.dart` - æšä¸¾å®šä¹‰

**æ¸²æŸ“å™¨**ï¼š
- `lib/features/tools/sheet_music/painters/jianpu_painter.dart` - ç®€è°±æ¸²æŸ“å™¨
- `lib/features/tools/sheet_music/painters/grand_staff_painter.dart` - äº”çº¿è°±æ¸²æŸ“å™¨
- `lib/features/tools/sheet_music/painters/piano_roll_painter.dart` - é’¢ç´é”®ç›˜æ¸²æŸ“å™¨
- `lib/features/tools/sheet_music/painters/render_config.dart` - æ¸²æŸ“é…ç½®

**å¸ƒå±€å¼•æ“**ï¼š
- `lib/features/tools/sheet_music/layout/layout_engine.dart` - å¸ƒå±€è®¡ç®—
- `lib/features/tools/sheet_music/layout/layout_result.dart` - å¸ƒå±€ç»“æœ

**å¯¼å‡ºæœåŠ¡**ï¼š
- `lib/features/tools/sheet_music/services/export/pdf_exporter.dart` - PDF å¯¼å‡º
- `lib/features/tools/sheet_music/services/export/midi_exporter.dart` - MIDI å¯¼å‡º

**å·¥å…·ç±»**ï¼š
- `lib/features/tools/sheet_music/utils/score_converter.dart` - æ ¼å¼è½¬æ¢

**æ–‡æ¡£**ï¼š
- `docs/sheet_music_json_format.md` - JSON æ ¼å¼å®Œæ•´æ–‡æ¡£

### 4.4 å¾…å®ŒæˆåŠŸèƒ½ï¼ˆç¼–è¾‘å™¨ï¼‰

å½“å‰ç‰ˆæœ¬ä¸“æ³¨äº**æ’­æ”¾å’Œå¯¼å‡º**ï¼Œç¼–è¾‘å™¨åŠŸèƒ½å¾…åç»­å®ç°ï¼š

- â³ ç®€è°±ç¼–è¾‘å™¨ï¼ˆæ·»åŠ /åˆ é™¤éŸ³ç¬¦ï¼‰
- â³ äº”çº¿è°±ç¼–è¾‘å™¨
- â³ ä»é›¶åˆ›å»ºæ–°ä¹è°±
- â³ ä¿®æ”¹å…ƒæ•°æ®ï¼ˆè°ƒå·ã€æ‹å·ã€é€Ÿåº¦ï¼‰

**è¯´æ˜**ï¼šå½“å‰æœ‰ä¸¤å¥—æ•°æ®æ¨¡å‹ï¼š
- `SheetModel`ï¼ˆç®€è°±é£æ ¼ï¼Œç”¨äºç¼–è¾‘å™¨ï¼‰
- `Score`ï¼ˆMIDI é£æ ¼ï¼Œç”¨äºæ’­æ”¾/æ¸²æŸ“ï¼‰
- è½¬æ¢å™¨ï¼š`ScoreConverter.fromSheetModel()`

---

## äº”ã€åŠŸèƒ½å®Œå–„è·¯çº¿å›¾

### Phase 1: å·¥å…·è®¾ç½®æŒä¹…åŒ–ï¼ˆä¼˜å…ˆçº§ P0ï¼‰â° é¢„è®¡ 2-3 å¤©

**ç›®æ ‡**ï¼šè®©ç”¨æˆ·çš„å·¥å…·åå¥½å¾—ä»¥ä¿å­˜ï¼Œæå‡ä½¿ç”¨ä½“éªŒ

#### ä»»åŠ¡æ¸…å•

1. **åˆ›å»ºè®¾ç½®ç®¡ç†æœåŠ¡**ï¼ˆ0.5å¤©ï¼‰
   - [ ] åˆ›å»º `lib/core/settings/settings_service.dart`
   - [ ] åˆ›å»º `lib/features/tools/models/tool_settings.dart`
   - [ ] åœ¨ `StorageKeys` ä¸­æ·»åŠ æ–°çš„é”®å®šä¹‰
   - [ ] åœ¨ `AppBinding` ä¸­æ³¨å†ŒæœåŠ¡

2. **é’¢ç´å·¥å…·æŒä¹…åŒ–**ï¼ˆ1å¤©ï¼‰
   - [ ] åˆ›å»º `PianoSettings` æ¨¡å‹
   - [ ] åœ¨ `PianoController` ä¸­é›†æˆè®¾ç½®ä¿å­˜
   - [ ] å¯åŠ¨æ—¶åŠ è½½è®¾ç½®
   - [ ] è®¾ç½®å˜åŒ–æ—¶è‡ªåŠ¨ä¿å­˜
   - [ ] æµ‹è¯•éŸ³åŸŸã€æ ‡ç­¾ã€ä¸»é¢˜åˆ‡æ¢çš„æŒä¹…åŒ–

3. **èŠ‚æ‹å™¨æŒä¹…åŒ–**ï¼ˆ0.5å¤©ï¼‰
   - [ ] åˆ›å»º `MetronomeSettings` æ¨¡å‹
   - [ ] åœ¨ `MetronomeController` ä¸­é›†æˆè®¾ç½®ä¿å­˜
   - [ ] å¯åŠ¨æ—¶åŠ è½½è®¾ç½®
   - [ ] æµ‹è¯• BPMã€æ‹å·ã€ä¸»é¢˜çš„æŒä¹…åŒ–

4. **å…¨å±€å£°éŸ³è®¾ç½®**ï¼ˆ1å¤©ï¼‰
   - [ ] åœ¨ `SettingsPage` ä¸­å®ç°éŸ³æ•ˆå¼€å…³åŠŸèƒ½
   - [ ] åœ¨ `ProfileController` ä¸­æ·»åŠ éŸ³æ•ˆç®¡ç†æ–¹æ³•
   - [ ] åœ¨ `AudioService` ä¸­é›†æˆé™éŸ³æ§åˆ¶
   - [ ] æµ‹è¯•é’¢ç´éŸ³æ•ˆå’Œæ•ˆæœéŸ³çš„å¼€å…³

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ“ é’¢ç´å·¥å…·çš„æ‰€æœ‰è®¾ç½®åœ¨é‡å¯åä¿æŒ
- âœ“ èŠ‚æ‹å™¨çš„ BPM å’Œæ‹å·åœ¨é‡å¯åä¿æŒ
- âœ“ éŸ³æ•ˆå¼€å…³åœ¨é‡å¯åä¿æŒ
- âœ“ è®¾ç½®å˜åŒ–å“åº”é€Ÿåº¦ < 100ms

---

### Phase 2: è®¾ç½®é¡µé¢å®Œå–„ï¼ˆä¼˜å…ˆçº§ P1ï¼‰â° é¢„è®¡ 3-4 å¤©

**ç›®æ ‡**ï¼šå®Œæˆè®¾ç½®é¡µé¢çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·æ§åˆ¶

#### ä»»åŠ¡æ¸…å•

1. **ä¸»é¢˜è‰²é€‰æ‹©åŠŸèƒ½**ï¼ˆ1å¤©ï¼‰
   - [ ] è®¾è®¡ä¸»é¢˜è‰²é…ç½®ï¼ˆ5-8ç§é¢„è®¾é¢œè‰²ï¼‰
   - [ ] åœ¨ `ThemeController` ä¸­æ·»åŠ ä¸»é¢˜è‰²åˆ‡æ¢
   - [ ] åœ¨ `SettingsPage` ä¸­å®ç°ä¸»é¢˜è‰²é€‰æ‹©å™¨UI
   - [ ] æŒä¹…åŒ–ä¸»é¢˜è‰²é€‰æ‹©
   - [ ] æµ‹è¯•ä¸»é¢˜è‰²å®æ—¶åˆ‡æ¢

2. **æ•°æ®å¯¼å‡ºåŠŸèƒ½**ï¼ˆ1.5å¤©ï¼‰
   - [ ] åˆ›å»º `lib/features/profile/services/data_export_service.dart`
   - [ ] å®ç°å¯¼å‡ºå­¦ä¹ ç»Ÿè®¡ä¸º JSON
   - [ ] å®ç°å¯¼å‡ºç»ƒä¹ è®°å½•ä¸º JSON
   - [ ] å®ç°å¯¼å‡ºè¯¾ç¨‹è¿›åº¦ä¸º JSON
   - [ ] å®ç°æ‰“åŒ…å¯¼å‡ºä¸º ZIP æ–‡ä»¶
   - [ ] æ·»åŠ åˆ†äº«åŠŸèƒ½ï¼ˆç³»ç»Ÿåˆ†äº«å¯¹è¯æ¡†ï¼‰
   - [ ] æµ‹è¯•å¯¼å‡ºçš„æ•°æ®å®Œæ•´æ€§

3. **æ•°æ®å¯¼å…¥åŠŸèƒ½**ï¼ˆ1.5å¤©ï¼‰
   - [ ] å®ç°æ–‡ä»¶é€‰æ‹©å™¨
   - [ ] å®ç° JSON æ•°æ®è§£æå’ŒéªŒè¯
   - [ ] å®ç°æ•°æ®åˆå¹¶ç­–ç•¥ï¼ˆè¦†ç›–/è¿½åŠ ï¼‰
   - [ ] æ·»åŠ å¯¼å…¥ç¡®è®¤å¯¹è¯æ¡†
   - [ ] å¤„ç†å¯¼å…¥é”™è¯¯å’Œå¼‚å¸¸
   - [ ] æµ‹è¯•å¯¼å…¥åŠŸèƒ½çš„å®¹é”™æ€§

4. **å…³äºé¡µé¢å®Œå–„**ï¼ˆ0.5å¤©ï¼‰
   - [ ] åŠ¨æ€è·å–ç‰ˆæœ¬å·ï¼ˆä» pubspec.yamlï¼‰
   - [ ] åˆ›å»ºç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–é™æ€é¡µé¢
   - [ ] å®ç°å¸®åŠ©ä¸åé¦ˆè·³è½¬ï¼ˆé‚®ä»¶æˆ–è¡¨å•ï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ“ å¯ä»¥å¯¼å‡ºæ‰€æœ‰å­¦ä¹ æ•°æ®ä¸ºæ–‡ä»¶
- âœ“ å¯ä»¥ä»æ–‡ä»¶å¯¼å…¥æ•°æ®å¹¶æ¢å¤
- âœ“ ä¸»é¢˜è‰²åˆ‡æ¢æµç•…ä¸”æŒä¹…åŒ–
- âœ“ ç‰ˆæœ¬å·ä¸å®é™…æ„å»ºç‰ˆæœ¬ä¸€è‡´

---

### Phase 3: ä¹è°±æ’­æ”¾å™¨è®¾ç½®ï¼ˆä¼˜å…ˆçº§ P2ï¼‰â° é¢„è®¡ 1-2 å¤©

**ç›®æ ‡**ï¼šä¸ºä¹è°±æ’­æ”¾å™¨æ·»åŠ ç”¨æˆ·åå¥½è®¾ç½®

#### ä»»åŠ¡æ¸…å•

1. **æ’­æ”¾å™¨è®¾ç½®æ¨¡å‹**ï¼ˆ0.5å¤©ï¼‰
   - [ ] åˆ›å»º `SheetMusicSettings` æ¨¡å‹
   - [ ] å®šä¹‰æ’­æ”¾é€Ÿåº¦é€‰é¡¹ï¼ˆ0.5x, 0.75x, 1x, 1.25x, 1.5xï¼‰
   - [ ] å®šä¹‰æ˜¾ç¤ºæ¨¡å¼ï¼ˆç®€è°±/äº”çº¿è°±/åŒé‡æ˜¾ç¤ºï¼‰
   - [ ] å®šä¹‰è‡ªåŠ¨æ’­æ”¾å’Œå¾ªç¯æ’­æ”¾é€‰é¡¹

2. **æ’­æ”¾å™¨æŒä¹…åŒ–**ï¼ˆ1å¤©ï¼‰
   - [ ] åœ¨ `SheetMusicController` ä¸­é›†æˆè®¾ç½®
   - [ ] å¯åŠ¨æ—¶åŠ è½½ç”¨æˆ·åå¥½
   - [ ] è®¾ç½®å˜åŒ–æ—¶è‡ªåŠ¨ä¿å­˜
   - [ ] æ·»åŠ è®¾ç½®UIï¼ˆé€Ÿåº¦é€‰æ‹©ã€æ˜¾ç¤ºåˆ‡æ¢ï¼‰
   - [ ] æµ‹è¯•è®¾ç½®çš„æŒä¹…åŒ–

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ“ æ’­æ”¾é€Ÿåº¦åœ¨é‡å¯åä¿æŒ
- âœ“ æ˜¾ç¤ºæ¨¡å¼åå¥½åœ¨é‡å¯åä¿æŒ
- âœ“ UIæµç•…æ— å¡é¡¿

---

### Phase 4: å…¶ä»–åŠŸèƒ½å®Œå–„ï¼ˆä¼˜å…ˆçº§ P3ï¼‰â° é¢„è®¡ 2-3 å¤©

**ç›®æ ‡**ï¼šå®Œå–„æ¬¡è¦åŠŸèƒ½ï¼Œæå‡æ•´ä½“å®Œæˆåº¦

#### ä»»åŠ¡æ¸…å•

1. **è¯­è¨€è®¾ç½®**ï¼ˆ1å¤©ï¼‰
   - [ ] å®ç°è¯­è¨€åˆ‡æ¢åŠŸèƒ½ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰
   - [ ] åœ¨ `SettingsPage` ä¸­æ·»åŠ è¯­è¨€é€‰æ‹©å™¨
   - [ ] æŒä¹…åŒ–è¯­è¨€é€‰æ‹©
   - [ ] æµ‹è¯•è¯­è¨€åˆ‡æ¢çš„å®Œæ•´æ€§

2. **å¼•å¯¼é¡µä¼˜åŒ–**ï¼ˆ0.5å¤©ï¼‰
   - [ ] å®ç°é¦–æ¬¡å¯åŠ¨æ ‡è®°
   - [ ] æŒä¹…åŒ–å¼•å¯¼é¡µå®ŒæˆçŠ¶æ€
   - [ ] æ·»åŠ "è·³è¿‡å¼•å¯¼"é€‰é¡¹
   - [ ] åœ¨è®¾ç½®ä¸­æ·»åŠ "é‡æ–°æŸ¥çœ‹å¼•å¯¼"å…¥å£

3. **ä¹è°±ç¼–è¾‘å™¨**ï¼ˆ1.5å¤©ï¼‰
   - [ ] å®ç°ç®€è°±ç¼–è¾‘å™¨åŸºç¡€åŠŸèƒ½
   - [ ] æ·»åŠ /åˆ é™¤éŸ³ç¬¦
   - [ ] ä¿®æ”¹éŸ³ç¬¦æ—¶å€¼
   - [ ] ä¿®æ”¹å…ƒæ•°æ®ï¼ˆè°ƒå·ã€æ‹å·ã€é€Ÿåº¦ï¼‰
   - [ ] ä¿å­˜ç¼–è¾‘çš„ä¹è°±
   - [ ] æµ‹è¯•ç¼–è¾‘åŠŸèƒ½

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ“ è¯­è¨€åˆ‡æ¢å³æ—¶ç”Ÿæ•ˆ
- âœ“ å¼•å¯¼é¡µåªåœ¨é¦–æ¬¡å¯åŠ¨æ˜¾ç¤º
- âœ“ å¯ä»¥ç¼–è¾‘å’Œä¿å­˜ç®€å•çš„ç®€è°±

---

## å…­ã€å·²å®Œæˆæ¨¡å—

### 6.1 è¯¾ç¨‹ç³»ç»Ÿ âœ…

- ç®€è°±å…¥é—¨ï¼ˆ10è¯¾ï¼‰
- äº”çº¿è°±å…¥é—¨ï¼ˆ15è¯¾ï¼‰
- é’¢ç´å…¥é—¨ï¼ˆ20è¯¾ï¼‰
- è¯¾ç¨‹è¯¦æƒ…é¡µã€å­¦ä¹ é¡µ
- è¿›åº¦æŒä¹…åŒ–

### 6.2 ç»ƒä¹ ç³»ç»Ÿ âœ…

- è¯†è°±ç»ƒä¹ ï¼ˆç®€è°±/äº”çº¿è°±ï¼‰
- èŠ‚å¥ç»ƒä¹ ï¼ˆè·Ÿæ‹æ•²å‡»ï¼‰
- å¬éŸ³ç»ƒä¹ ï¼ˆå•éŸ³/éŸ³ç¨‹ï¼‰
- å¼¹å¥ç»ƒä¹ 
- ç»ƒä¹ è®°å½•æŒä¹…åŒ–

### 6.3 å·¥å…·åŠŸèƒ½

| å·¥å…· | çŠ¶æ€ |
|------|------|
| è™šæ‹Ÿé’¢ç´ | âœ… å®Œæˆ |
| èŠ‚æ‹å™¨ | âœ… å®Œæˆ |
| ä¹è°±æ’­æ”¾å™¨ | âœ… å®Œæˆï¼ˆæ”¯æŒç®€è°±/äº”çº¿è°±/å’Œå¼¦ï¼‰ |
| ä¹è°±å¯¼å‡º | âœ… å®Œæˆï¼ˆPDF/MIDIï¼‰ |
| éŸ³ç¬¦å¯¹ç…§è¡¨ | âœ… å®Œæˆ |

### 6.4 ä¸ªäººä¸­å¿ƒ âœ…

- å­¦ä¹ ç»Ÿè®¡é¡µé¢
- æˆå°±ç³»ç»Ÿï¼ˆ19ä¸ªæˆå°±ï¼‰
- è®¾ç½®é¡µé¢ï¼ˆéƒ¨åˆ†åŠŸèƒ½ï¼‰
- æ•°æ®æŒä¹…åŒ–

### 6.5 éŸ³é¢‘èµ„æº âœ…

- 88ä¸ªé’¢ç´éŸ³ï¼ˆMIDI 21-108ï¼‰
- èŠ‚æ‹å™¨éŸ³æ•ˆ
- æ•ˆæœéŸ³ï¼ˆcorrect/wrong/complete/levelUpï¼‰

ç”Ÿæˆå‘½ä»¤ï¼š`make audio`

---

## ä¸ƒã€é‡Œç¨‹ç¢‘è§„åˆ’

| é‡Œç¨‹ç¢‘ | ç›®æ ‡æ—¥æœŸ | å†…å®¹ | çŠ¶æ€ |
|--------|----------|------|------|
| M1 | å·²å®Œæˆ | å¯è¿è¡Œ Demo | âœ… |
| M2 | å·²å®Œæˆ | è¯¾ç¨‹ MVP | âœ… |
| M3 | å·²å®Œæˆ | ç»ƒä¹ ç³»ç»Ÿ | âœ… |
| M4 | å·²å®Œæˆ | ä¹è°±ç³»ç»Ÿ v3 | âœ… |
| **M5** | **è¿›è¡Œä¸­** | **è®¾ç½®ä¸æŒä¹…åŒ–** | ğŸ”„ 50% |
| M6 | 2026-01 æœˆåº• | åŠŸèƒ½å®Œæ•´ç‰ˆ | ğŸ“‹ |
| M7 | 2026-02 | æµ‹è¯•ä¸ä¼˜åŒ– | ğŸ“‹ |
| M8 | 2026-03 | å‘å¸ƒç‰ˆæœ¬ | ğŸ“‹ |

---

## å…«ã€æŠ€æœ¯å€ºåŠ¡

| é—®é¢˜ | ä¼˜å…ˆçº§ | å½±å“èŒƒå›´ | çŠ¶æ€ | é¢„è®¡è§£å†³æ—¶é—´ |
|------|--------|---------|------|------------|
| å·¥å…·è®¾ç½®æ— æŒä¹…åŒ– | P0 | é’¢ç´ã€èŠ‚æ‹å™¨ | ğŸ“‹ å¾…å®ç° | Phase 1 (2-3å¤©) |
| å£°éŸ³è®¾ç½®ä»…UI | P0 | å…¨å±€éŸ³æ•ˆ | ğŸ“‹ å¾…å®ç° | Phase 1 (2-3å¤©) |
| æ•°æ®å¯¼å‡º/å¯¼å…¥ç¼ºå¤± | P1 | æ•°æ®å¤‡ä»½ | ğŸ“‹ å¾…å®ç° | Phase 2 (3-4å¤©) |
| ä¸»é¢˜è‰²é€‰æ‹©ä»…UI | P1 | å¤–è§‚è®¾ç½® | ğŸ“‹ å¾…å®ç° | Phase 2 (3-4å¤©) |
| ä¹è°±ç¼–è¾‘å™¨åŠŸèƒ½æœ‰é™ | P2 | ä¹è°±åˆ›ä½œ | ğŸ“‹ å¾…å®ç° | Phase 4 (1.5å¤©) |
| è¯­è¨€åˆ‡æ¢æœªå®ç° | P2 | å›½é™…åŒ– | ğŸ“‹ å¾…å®ç° | Phase 4 (1å¤©) |
| éœ€è¦ç»Ÿä¸€ SheetModel å’Œ Score | P3 | ä»£ç ç»´æŠ¤ | ğŸ“‹ å¾…ä¼˜åŒ– | æœªæ’æœŸ |

**æŠ€æœ¯å€ºåŠ¡æ€»è®¡**ï¼š7é¡¹ï¼Œå…¶ä¸­ P0/P1 çº§åˆ« 4é¡¹

---

## ä¹ã€æœ€è¿‘æ›´æ–°æ—¥å¿—

### 2026-01-15ï¼ˆæŒä¹…åŒ–åˆ†æä¸è§„åˆ’ï¼‰
- ğŸ” å®Œæˆäº†å…¨é¡¹ç›®æŒä¹…åŒ–åŠŸèƒ½çš„è¯¦ç»†åˆ†æ
- ğŸ“Š è¯†åˆ«äº† 5ä¸ªå·²å®ç°æŒä¹…åŒ–çš„æ¨¡å—ï¼ˆè®¤è¯ã€ä¸»é¢˜ã€å­¦ä¹ ç»Ÿè®¡ã€ç»ƒä¹ è®°å½•ã€è¯¾ç¨‹è¿›åº¦ï¼‰
- âš ï¸ è¯†åˆ«äº† 6ä¸ªæœªå®ç°æŒä¹…åŒ–çš„åŠŸèƒ½ï¼ˆå·¥å…·è®¾ç½®ã€å£°éŸ³è®¾ç½®ç­‰ï¼‰
- ğŸ“ åˆ¶å®šäº†å®Œæ•´çš„ 4 Phase å®æ–½è®¡åˆ’
- ğŸ“‹ æ›´æ–°äº†é‡Œç¨‹ç¢‘è§„åˆ’å’ŒæŠ€æœ¯å€ºåŠ¡æ¸…å•

### 2026-01-15ï¼ˆä¹è°±ç³»ç»Ÿä¼˜åŒ–ï¼‰
- âœ… ä¿®å¤äº† 16 åˆ†éŸ³ç¬¦ä¸‹åˆ’çº¿/ç¬¦æ æ˜¾ç¤ºé—®é¢˜ï¼ˆå¢åŠ é—´è·åˆ° 5pxï¼‰
- âœ… å®ç°äº†å’Œå¼¦ä¸é¡ºåºæ¼”å¥çš„æ™ºèƒ½åŒºåˆ†ï¼ˆåŸºäº beamCountï¼‰
- âœ… ä¿®å¤äº†å’Œå¼¦éŸ³ç¬¦æ’åºï¼ˆæŒ‰éŸ³é«˜ä»ä½åˆ°é«˜ï¼‰
- âœ… æ›´æ–°äº† MIDI å¯¼å‡ºæ”¯æŒå’Œå¼¦/é¡ºåºæ¼”å¥
- âœ… æ›´æ–°äº† PDF å¯¼å‡ºæ”¯æŒå’Œå¼¦æ˜¾ç¤ºï¼ˆç®€è°±/äº”çº¿è°±ï¼‰
- âœ… ä¿®æ­£äº†å¤šä¸ªå†…ç½®ä¹è°±çš„å’Œå¼¦æ•°æ®ï¼ˆå°æ˜Ÿæ˜Ÿã€è™«å„¿é£ã€å¡å†œã€Flower Danceï¼‰
- âœ… ç¼–å†™äº†å®Œæ•´çš„ JSON æ ¼å¼æ–‡æ¡£ï¼ˆ`docs/sheet_music_json_format.md`ï¼‰

### 2026-01-13
- âœ… å®Œæˆä¹è°±ç³»ç»Ÿ Canvas é‡æ„ä¸»ä½“åŠŸèƒ½
- âœ… å®ç°ç®€è°±å’Œäº”çº¿è°±åŒé‡æ¸²æŸ“
- âœ… å®ç°é’¢ç´é”®ç›˜ Canvas æ¸²æŸ“ä¸åŒæ­¥
- âœ… å®ç°å¸ƒå±€å¼•æ“å’Œè‡ªåŠ¨åˆ†è¡Œ
- âœ… å®ç° PDF å’Œ MIDI å¯¼å‡ºåŸºç¡€åŠŸèƒ½

---

## åã€å¼€å‘å‘½ä»¤
| M2 | - | è¯¾ç¨‹ MVP | âœ… |
| M3 | - | ç»ƒä¹ ç³»ç»Ÿ | âœ… |
| M4 | - | åŠŸèƒ½å®Œæ•´ç‰ˆ | ğŸ”„ |
| M5 | - | ä¹è°±ç³»ç»Ÿ v3 | ğŸ“‹ |
| M6 | - | å‘å¸ƒç‰ˆæœ¬ | ğŸ“‹ |

---

## äº”ã€æŠ€æœ¯å€ºåŠ¡

| é—®é¢˜ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| ç®€è°±ç¼–è¾‘å™¨åŠŸèƒ½æœ‰é™ | P1 | ğŸ“‹ å¾…å®ç° |
| é’¢ç´é”®ç›˜ä¸æ”¯æŒæ»‘å¥ | P2 | ğŸ“‹ å¾…å®ç° |
| éœ€è¦ç»Ÿä¸€ SheetModel å’Œ Score æ•°æ®æ¨¡å‹ | P2 | ğŸ“‹ å¾…ä¼˜åŒ– |

---

## å…­ã€æœ€è¿‘æ›´æ–°æ—¥å¿—

### 2026-01-15
- âœ… ä¿®å¤äº† 16 åˆ†éŸ³ç¬¦ä¸‹åˆ’çº¿/ç¬¦æ æ˜¾ç¤ºé—®é¢˜ï¼ˆå¢åŠ é—´è·åˆ° 5pxï¼‰
- âœ… å®ç°äº†å’Œå¼¦ä¸é¡ºåºæ¼”å¥çš„æ™ºèƒ½åŒºåˆ†ï¼ˆåŸºäº beamCountï¼‰
- âœ… ä¿®å¤äº†å’Œå¼¦éŸ³ç¬¦æ’åºï¼ˆæŒ‰éŸ³é«˜ä»ä½åˆ°é«˜ï¼‰
- âœ… æ›´æ–°äº† MIDI å¯¼å‡ºæ”¯æŒå’Œå¼¦/é¡ºåºæ¼”å¥
- âœ… æ›´æ–°äº† PDF å¯¼å‡ºæ”¯æŒå’Œå¼¦æ˜¾ç¤ºï¼ˆç®€è°±/äº”çº¿è°±ï¼‰
- âœ… ä¿®æ­£äº†å¤šä¸ªå†…ç½®ä¹è°±çš„å’Œå¼¦æ•°æ®ï¼ˆå°æ˜Ÿæ˜Ÿã€è™«å„¿é£ã€å¡å†œã€Flower Danceï¼‰
- âœ… ç¼–å†™äº†å®Œæ•´çš„ JSON æ ¼å¼æ–‡æ¡£ï¼ˆ`docs/sheet_music_json_format.md`ï¼‰

### 2026-01-13
- âœ… å®Œæˆä¹è°±ç³»ç»Ÿ Canvas é‡æ„ä¸»ä½“åŠŸèƒ½
- âœ… å®ç°ç®€è°±å’Œäº”çº¿è°±åŒé‡æ¸²æŸ“
- âœ… å®ç°é’¢ç´é”®ç›˜ Canvas æ¸²æŸ“ä¸åŒæ­¥
- âœ… å®ç°å¸ƒå±€å¼•æ“å’Œè‡ªåŠ¨åˆ†è¡Œ
- âœ… å®ç° PDF å’Œ MIDI å¯¼å‡ºåŸºç¡€åŠŸèƒ½

---

## ä¸ƒã€å¼€å‘å‘½ä»¤

```bash
# è¿è¡Œé¡¹ç›®
make run           # Chrome
make run-web       # Webï¼ˆç«¯å£ 8080ï¼‰
make run-ios       # iOS æ¨¡æ‹Ÿå™¨
make run-android   # Android

# éŸ³é¢‘ç”Ÿæˆ
make audio         # ç”Ÿæˆæ‰€æœ‰éŸ³é¢‘
make audio-clean   # æ¸…ç†éŸ³é¢‘

# ä»£ç è´¨é‡
make analyze       # ä»£ç åˆ†æ
make format        # æ ¼å¼åŒ–
make test          # æµ‹è¯•
```

---

## å…«ã€æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [äº§å“æ–‡æ¡£](./ä¹ç†é€šäº§å“æ–‡æ¡£.md) | äº§å“è®¾è®¡ã€åŠŸèƒ½è§„åˆ’ |
| [æ¶æ„è®¾è®¡](./ä¹ç†é€šåº”ç”¨æ¶æ„è®¾è®¡æ–‡æ¡£.md) | æŠ€æœ¯æ¶æ„ã€ä»£ç è§„èŒƒ |
| [ä¹è°±æ¸²æŸ“ v3](./ä¹è°±æ¸²æŸ“ç³»ç»Ÿè®¾è®¡æ–‡æ¡£.md) | Canvas æ¸²æŸ“æ¶æ„ |
| [ä¹è°± JSON æ ¼å¼](./sheet_music_json_format.md) | ä¹è°±æ•°æ®æ ¼å¼è§„èŒƒ |
| [ä¹è°±åº“è¯´æ˜](./ä¹è°±åº“è¯´æ˜.md) | å†…ç½®ä¹è°±æ•°æ® |

---

*æ–‡æ¡£ç»´æŠ¤ï¼šæŒç»­æ›´æ–°ä¸­...*
