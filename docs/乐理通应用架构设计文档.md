# ä¹ç†é€š - åº”ç”¨æ¶æ„è®¾è®¡æ–‡æ¡£

## ä¸€ã€æ¶æ„è®¾è®¡ç›®æ ‡

### 1.1 è®¾è®¡åŸåˆ™

| åŸåˆ™ | è¯´æ˜ | å®è·µæ–¹å¼ |
|------|------|---------|
| **å•ä¸€èŒè´£** | æ¯ä¸ªæ¨¡å—/ç±»åªè´Ÿè´£ä¸€ä»¶äº‹ | æŒ‰åŠŸèƒ½æ‹†åˆ†æ¨¡å—ï¼ŒController åªå¤„ç†ä¸šåŠ¡é€»è¾‘ |
| **å¼€é—­åŸåˆ™** | å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ | ä½¿ç”¨æŠ½è±¡æ¥å£ï¼Œä¾èµ–æ³¨å…¥ |
| **ä¾èµ–å€’ç½®** | ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç° | Repository æ¨¡å¼ï¼Œæ¥å£éš”ç¦» |
| **å…³æ³¨ç‚¹åˆ†ç¦»** | UIã€ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åˆ†ç¦» | ä¸‰å±‚æ¶æ„ |
| **DRY** | ä¸è¦é‡å¤è‡ªå·± | æŠ½å–å…¬å…±ç»„ä»¶å’Œå·¥å…·ç±» |

### 1.2 è´¨é‡ç›®æ ‡

| ç›®æ ‡ | æŒ‡æ ‡ | å®ç°æ–¹å¼ |
|------|------|---------|
| **å¯ç»´æŠ¤æ€§** | ä¿®æ”¹ä»£ç ä¸å½±å“å…¶ä»–æ¨¡å— | æ¨¡å—åŒ–ã€ä½è€¦åˆ |
| **å¯æ‰©å±•æ€§** | æ–°å¢åŠŸèƒ½æ— éœ€å¤§æ”¹åŠ¨ | æ’ä»¶åŒ–æ¶æ„ã€ä¾èµ–æ³¨å…¥ |
| **å¯æµ‹è¯•æ€§** | æ ¸å¿ƒé€»è¾‘å¯å•å…ƒæµ‹è¯• | ä¾èµ–æ³¨å…¥ã€Mock |
| **å¯è¯»æ€§** | ä»£ç ç»“æ„æ¸…æ™°æ˜“æ‡‚ | è§„èŒƒå‘½åã€å®Œå–„æ³¨é‡Š |
| **æ€§èƒ½** | æµç•…çš„ç”¨æˆ·ä½“éªŒ | æ‡’åŠ è½½ã€ç¼“å­˜ç­–ç•¥ |

---

## äºŒã€æ•´ä½“æ¶æ„

### 2.1 åˆ†å±‚æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Presentation Layer                          â”‚
â”‚                            (è¡¨ç°å±‚/UIå±‚)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚    Pages    â”‚  â”‚   Widgets   â”‚  â”‚   Dialogs   â”‚                  â”‚
â”‚  â”‚    é¡µé¢     â”‚  â”‚    ç»„ä»¶     â”‚  â”‚   å¼¹çª—      â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                â”‚                â”‚                          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                          â”‚                                           â”‚
â”‚                          â–¼                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          Business Layer                              â”‚
â”‚                          (ä¸šåŠ¡é€»è¾‘å±‚)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Controllers â”‚  â”‚   States    â”‚  â”‚   Events    â”‚                  â”‚
â”‚  â”‚   æ§åˆ¶å™¨    â”‚  â”‚    çŠ¶æ€     â”‚  â”‚    äº‹ä»¶     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          Domain Layer                                â”‚
â”‚                          (é¢†åŸŸå±‚/æœåŠ¡å±‚)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Services   â”‚  â”‚    Models   â”‚  â”‚ Repositoriesâ”‚                  â”‚
â”‚  â”‚    æœåŠ¡     â”‚  â”‚    æ¨¡å‹     â”‚  â”‚   ä»“å‚¨æ¥å£   â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                                 â”‚                          â”‚
â”‚         â–¼                                 â–¼                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          Data Layer                                  â”‚
â”‚                          (æ•°æ®å±‚)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Network    â”‚  â”‚   Storage   â”‚  â”‚    Cache    â”‚                  â”‚
â”‚  â”‚  ç½‘ç»œè¯·æ±‚   â”‚  â”‚  æœ¬åœ°å­˜å‚¨   â”‚  â”‚    ç¼“å­˜     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å„å±‚èŒè´£

| å±‚çº§ | èŒè´£ | åŒ…å«å†…å®¹ |
|------|------|---------|
| **è¡¨ç°å±‚** | ç”¨æˆ·ç•Œé¢å±•ç¤ºã€ç”¨æˆ·äº¤äº’ | Pagesã€Widgetsã€åŠ¨ç”»ã€è·¯ç”± |
| **ä¸šåŠ¡å±‚** | ä¸šåŠ¡é€»è¾‘å¤„ç†ã€çŠ¶æ€ç®¡ç† | Controllersã€çŠ¶æ€å¯¹è±¡ |
| **é¢†åŸŸå±‚** | æ ¸å¿ƒä¸šåŠ¡è§„åˆ™ã€é¢†åŸŸæ¨¡å‹ | Servicesã€Modelsã€Repositoryæ¥å£ |
| **æ•°æ®å±‚** | æ•°æ®è·å–ä¸å­˜å‚¨ | APIè°ƒç”¨ã€æœ¬åœ°å­˜å‚¨ã€ç¼“å­˜ |

---

## ä¸‰ã€é¡¹ç›®ç›®å½•ç»“æ„

```
flutter_boost/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                           # åº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ app/                                # ğŸ“± åº”ç”¨é…ç½®å±‚
â”‚   â”‚   â”œâ”€â”€ app.dart                       # MaterialApp é…ç½®
â”‚   â”‚   â”œâ”€â”€ app_binding.dart               # å…¨å±€ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”œâ”€â”€ routes/                        # è·¯ç”±ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ app_routes.dart           # è·¯ç”±åç§°å¸¸é‡
â”‚   â”‚   â”‚   â””â”€â”€ app_pages.dart            # è·¯ç”±é¡µé¢æ˜ å°„
â”‚   â”‚   â”œâ”€â”€ middlewares/                   # è·¯ç”±ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ auth_middleware.dart
â”‚   â”‚   â””â”€â”€ config/                        # åº”ç”¨é…ç½®
â”‚   â”‚       â”œâ”€â”€ app_config.dart           # ç¯å¢ƒé…ç½®
â”‚   â”‚       â””â”€â”€ api_config.dart           # API é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                               # ğŸ”§ æ ¸å¿ƒåŸºç¡€å±‚ï¼ˆä¸šåŠ¡æ— å…³ï¼‰
â”‚   â”‚   â”œâ”€â”€ base/                          # åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ base_controller.dart      # Controller åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ base_page.dart            # Page åŸºç±»
â”‚   â”‚   â”‚   â””â”€â”€ base_repository.dart      # Repository åŸºç±»
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ network/                       # ç½‘ç»œå±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ http_client.dart          # Dio å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ api_response.dart         # å“åº”æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ api_exception.dart        # å¼‚å¸¸å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ interceptors/             # æ‹¦æˆªå™¨
â”‚   â”‚   â”‚       â”œâ”€â”€ auth_interceptor.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ log_interceptor.dart
â”‚   â”‚   â”‚       â””â”€â”€ cache_interceptor.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ storage/                       # å­˜å‚¨å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ storage_service.dart      # å­˜å‚¨æœåŠ¡æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ local_storage.dart        # SharedPreferences å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ hive_storage.dart         # Hive å°è£…
â”‚   â”‚   â”‚   â””â”€â”€ storage_keys.dart         # å­˜å‚¨ Key å¸¸é‡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ audio/                         # éŸ³é¢‘æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ audio_service.dart        # éŸ³é¢‘æ’­æ”¾æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ piano_sound.dart          # é’¢ç´éŸ³è‰²
â”‚   â”‚   â”‚   â””â”€â”€ metronome_service.dart    # èŠ‚æ‹å™¨æœåŠ¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ theme/                         # ä¸»é¢˜ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ app_theme.dart            # ä¸»é¢˜é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ app_colors.dart           # é¢œè‰²å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ app_text_styles.dart      # æ–‡å­—æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ app_dimensions.dart       # å°ºå¯¸å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ theme_controller.dart     # ä¸»é¢˜æ§åˆ¶å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                         # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.dart               # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.dart           # éªŒè¯å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ date_utils.dart           # æ—¥æœŸå·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ music_utils.dart          # éŸ³ä¹å·¥å…·ï¼ˆéŸ³é«˜è®¡ç®—ç­‰ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ widgets/                       # é€šç”¨ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ buttons/                  # æŒ‰é’®ç»„ä»¶
â”‚   â”‚       â”‚   â””â”€â”€ app_button.dart
â”‚   â”‚       â”œâ”€â”€ cards/                    # å¡ç‰‡ç»„ä»¶
â”‚   â”‚       â”‚   â””â”€â”€ app_card.dart
â”‚   â”‚       â”œâ”€â”€ feedback/                 # åé¦ˆç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ app_loading.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ app_empty.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ app_error.dart
â”‚   â”‚       â”‚   â””â”€â”€ app_toast.dart
â”‚   â”‚       â”œâ”€â”€ inputs/                   # è¾“å…¥ç»„ä»¶
â”‚   â”‚       â”‚   â””â”€â”€ app_text_field.dart
â”‚   â”‚       â”œâ”€â”€ music/                    # éŸ³ä¹ä¸“ç”¨ç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ staff_widget.dart    # äº”çº¿è°±ç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ piano_keyboard.dart  # é’¢ç´é”®ç›˜ç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ note_widget.dart     # éŸ³ç¬¦ç»„ä»¶
â”‚   â”‚       â”‚   â””â”€â”€ rhythm_widget.dart   # èŠ‚å¥ç»„ä»¶
â”‚   â”‚       â””â”€â”€ layout/                   # å¸ƒå±€ç»„ä»¶
â”‚   â”‚           â”œâ”€â”€ app_scaffold.dart
â”‚   â”‚           â””â”€â”€ responsive_builder.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                           # ğŸ¯ åŠŸèƒ½æ¨¡å—å±‚ï¼ˆæŒ‰ä¸šåŠ¡åˆ’åˆ†ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ splash/                        # å¯åŠ¨é¡µæ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ views/
â”‚   â”‚   â”‚       â””â”€â”€ splash_page.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ onboarding/                    # å¼•å¯¼é¡µæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ onboarding_controller.dart
â”‚   â”‚   â”‚   â””â”€â”€ views/
â”‚   â”‚   â”‚       â””â”€â”€ onboarding_page.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ home/                          # é¦–é¡µæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ bindings/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ home_binding.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ home_controller.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ home_page.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ learning_map_widget.dart
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ daily_task_widget.dart
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ continue_learning_widget.dart
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â””â”€â”€ home_data_model.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ course/                        # è¯¾ç¨‹æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ bindings/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ course_binding.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ course_list_controller.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ course_detail_controller.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ course_model.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lesson_model.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ course_progress_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ course_repository.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ course_repository_impl.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ course_service.dart
â”‚   â”‚   â”‚   â””â”€â”€ views/
â”‚   â”‚   â”‚       â”œâ”€â”€ course_list_page.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ course_detail_page.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ lesson_page.dart
â”‚   â”‚   â”‚       â””â”€â”€ widgets/
â”‚   â”‚   â”‚           â”œâ”€â”€ course_card.dart
â”‚   â”‚   â”‚           â””â”€â”€ lesson_item.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ practice/                      # ç»ƒä¹ æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ bindings/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ practice_binding.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ practice_controller.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ note_practice_controller.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rhythm_practice_controller.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ piano_practice_controller.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ practice_question_model.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ practice_record_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ practice_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ question_generator.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ practice_evaluator.dart
â”‚   â”‚   â”‚   â””â”€â”€ views/
â”‚   â”‚   â”‚       â”œâ”€â”€ practice_home_page.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ note_practice_page.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ rhythm_practice_page.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ piano_practice_page.dart
â”‚   â”‚   â”‚       â””â”€â”€ practice_result_page.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tools/                         # å·¥å…·æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ piano/                    # è™šæ‹Ÿé’¢ç´
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ piano_controller.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ views/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ piano_page.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ metronome/                # èŠ‚æ‹å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ metronome_controller.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ views/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ metronome_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ sheet_music/              # ä¹è°±åº“
â”‚   â”‚   â”‚       â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚       â”œâ”€â”€ models/
â”‚   â”‚   â”‚       â””â”€â”€ views/
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ profile/                       # ä¸ªäººä¸­å¿ƒæ¨¡å—
â”‚   â”‚       â”œâ”€â”€ bindings/
â”‚   â”‚       â”‚   â””â”€â”€ profile_binding.dart
â”‚   â”‚       â”œâ”€â”€ controllers/
â”‚   â”‚       â”‚   â”œâ”€â”€ profile_controller.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ statistics_controller.dart
â”‚   â”‚       â”‚   â””â”€â”€ settings_controller.dart
â”‚   â”‚       â”œâ”€â”€ models/
â”‚   â”‚       â”‚   â”œâ”€â”€ user_model.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ achievement_model.dart
â”‚   â”‚       â”‚   â””â”€â”€ statistics_model.dart
â”‚   â”‚       â”œâ”€â”€ repositories/
â”‚   â”‚       â”‚   â””â”€â”€ user_repository.dart
â”‚   â”‚       â””â”€â”€ views/
â”‚   â”‚           â”œâ”€â”€ profile_page.dart
â”‚   â”‚           â”œâ”€â”€ statistics_page.dart
â”‚   â”‚           â”œâ”€â”€ achievement_page.dart
â”‚   â”‚           â””â”€â”€ settings_page.dart
â”‚   â”‚
â”‚   â””â”€â”€ shared/                             # ğŸ“¦ å…±äº«èµ„æº
â”‚       â”œâ”€â”€ constants/                     # å¸¸é‡å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ music_constants.dart      # éŸ³ä¹ç›¸å…³å¸¸é‡
â”‚       â”‚   â”œâ”€â”€ app_constants.dart        # åº”ç”¨å¸¸é‡
â”‚       â”‚   â””â”€â”€ asset_paths.dart          # èµ„æºè·¯å¾„
â”‚       â”‚
â”‚       â”œâ”€â”€ extensions/                    # Dart æ‰©å±•
â”‚       â”‚   â”œâ”€â”€ string_ext.dart
â”‚       â”‚   â”œâ”€â”€ context_ext.dart
â”‚       â”‚   â”œâ”€â”€ list_ext.dart
â”‚       â”‚   â””â”€â”€ datetime_ext.dart
â”‚       â”‚
â”‚       â”œâ”€â”€ enums/                         # æšä¸¾å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ practice_type.dart
â”‚       â”‚   â”œâ”€â”€ note_type.dart
â”‚       â”‚   â””â”€â”€ difficulty_level.dart
â”‚       â”‚
â”‚       â””â”€â”€ mixins/                        # Mixin
â”‚           â”œâ”€â”€ loading_mixin.dart
â”‚           â””â”€â”€ toast_mixin.dart
â”‚
â”œâ”€â”€ assets/                                 # ğŸ“ é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/                            # å›¾ç‰‡
â”‚   â”‚   â”œâ”€â”€ icons/                        # å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ illustrations/                # æ’å›¾
â”‚   â”‚   â””â”€â”€ instruments/                  # ä¹å™¨å›¾
â”‚   â”œâ”€â”€ audio/                             # éŸ³é¢‘
â”‚   â”‚   â”œâ”€â”€ piano/                        # é’¢ç´éŸ³ï¼ˆæŒ‰éŸ³ç¬¦å‘½åï¼‰
â”‚   â”‚   â”œâ”€â”€ metronome/                    # èŠ‚æ‹å™¨éŸ³æ•ˆ
â”‚   â”‚   â””â”€â”€ effects/                      # æ•ˆæœéŸ³
â”‚   â”œâ”€â”€ fonts/                             # å­—ä½“
â”‚   â”œâ”€â”€ data/                              # æ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ courses/                      # è¯¾ç¨‹æ•°æ® JSON
â”‚   â”‚   â”œâ”€â”€ questions/                    # ç»ƒä¹ é¢˜åº“ JSON
â”‚   â”‚   â””â”€â”€ sheets/                       # ä¹è°±æ•°æ® JSON
â”‚   â””â”€â”€ animations/                        # Lottie åŠ¨ç”»
â”‚
â”œâ”€â”€ test/                                   # ğŸ§ª æµ‹è¯•
â”‚   â”œâ”€â”€ unit/                              # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ widget/                            # Widget æµ‹è¯•
â”‚   â””â”€â”€ integration/                       # é›†æˆæµ‹è¯•
â”‚
â”œâ”€â”€ docs/                                   # ğŸ“„ æ–‡æ¡£
â”‚   â”œâ”€â”€ æ¶æ„è®¾è®¡æ–‡æ¡£.md
â”‚   â”œâ”€â”€ äº§å“è®¾è®¡æ–‡æ¡£.md
â”‚   â””â”€â”€ åº”ç”¨æ¶æ„è®¾è®¡æ–‡æ¡£.md
â”‚
â”œâ”€â”€ pubspec.yaml                            # ä¾èµ–é…ç½®
â”œâ”€â”€ analysis_options.yaml                   # ä»£ç åˆ†æè§„åˆ™
â””â”€â”€ README.md                               # é¡¹ç›®è¯´æ˜
```

---

## å››ã€æ ¸å¿ƒæ¶æ„è®¾è®¡

### 4.1 ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰

ä½¿ç”¨ GetX çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿç®¡ç†å…¨å±€æœåŠ¡ï¼š

```dart
// app/app_binding.dart
class AppBinding extends Bindings {
  @override
  void dependencies() {
    // æ ¸å¿ƒæœåŠ¡ï¼ˆæ°¸ä¹…ä¿æŒï¼‰
    Get.put<StorageService>(StorageServiceImpl(), permanent: true);
    Get.put<HttpClient>(HttpClient(), permanent: true);
    Get.put<AudioService>(AudioServiceImpl(), permanent: true);
    
    // ä¸»é¢˜æ§åˆ¶å™¨
    Get.put<ThemeController>(ThemeController(), permanent: true);
    
    // Repositoryï¼ˆæ‡’åŠ è½½ï¼‰
    Get.lazyPut<CourseRepository>(() => CourseRepositoryImpl());
    Get.lazyPut<PracticeRepository>(() => PracticeRepositoryImpl());
    Get.lazyPut<UserRepository>(() => UserRepositoryImpl());
  }
}
```

### 4.2 Repository æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Controller                                â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚      Repository        â”‚  â† æ¥å£å®šä¹‰              â”‚
â”‚              â”‚      (Abstract)        â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                          â”‚                                       â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚           â–¼              â–¼              â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Remote Impl  â”‚ â”‚  Local Impl  â”‚ â”‚  Mock Impl   â”‚            â”‚
â”‚  â”‚  (ç½‘ç»œå®ç°)   â”‚ â”‚  (æœ¬åœ°å®ç°)   â”‚ â”‚  (æµ‹è¯•å®ç°)  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```dart
// æ¥å£å®šä¹‰
abstract class CourseRepository {
  Future<List<Course>> getCourses();
  Future<Course> getCourseDetail(String id);
  Future<void> updateProgress(String courseId, double progress);
}

// å®ç°
class CourseRepositoryImpl implements CourseRepository {
  final HttpClient _http;
  final StorageService _storage;
  
  CourseRepositoryImpl({
    HttpClient? http,
    StorageService? storage,
  }) : _http = http ?? Get.find(),
       _storage = storage ?? Get.find();
  
  @override
  Future<List<Course>> getCourses() async {
    // å…ˆæŸ¥æœ¬åœ°ç¼“å­˜
    final cached = await _storage.get<List<Course>>('courses');
    if (cached != null) return cached;
    
    // æœ¬åœ°æ— æ•°æ®ï¼Œä» assets åŠ è½½
    final data = await rootBundle.loadString('assets/data/courses/list.json');
    final courses = (jsonDecode(data) as List)
        .map((e) => Course.fromJson(e))
        .toList();
    
    // ç¼“å­˜åˆ°æœ¬åœ°
    await _storage.set('courses', courses);
    return courses;
  }
  
  // ...
}
```

### 4.3 çŠ¶æ€ç®¡ç†æ¨¡å¼

ä½¿ç”¨ GetX å“åº”å¼çŠ¶æ€ç®¡ç†ï¼š

```dart
// Controller åŸºç±»
abstract class BaseController extends GetxController {
  // é€šç”¨çŠ¶æ€
  final isLoading = false.obs;
  final errorMessage = ''.obs;
  
  // çŠ¶æ€åˆ¤æ–­
  bool get hasError => errorMessage.isNotEmpty;
  
  // é€šç”¨åŠ è½½å¤„ç†
  Future<T?> handleLoading<T>(Future<T> Function() action) async {
    try {
      isLoading.value = true;
      errorMessage.value = '';
      return await action();
    } catch (e) {
      errorMessage.value = e.toString();
      return null;
    } finally {
      isLoading.value = false;
    }
  }
}

// å…·ä½“ Controller
class CourseListController extends BaseController {
  final CourseRepository _repository;
  
  CourseListController({CourseRepository? repository})
      : _repository = repository ?? Get.find();
  
  final courses = <Course>[].obs;
  final selectedCategory = 'all'.obs;
  
  // ç­›é€‰åçš„è¯¾ç¨‹
  List<Course> get filteredCourses {
    if (selectedCategory.value == 'all') return courses;
    return courses.where((c) => c.categoryId == selectedCategory.value).toList();
  }
  
  @override
  void onInit() {
    super.onInit();
    loadCourses();
  }
  
  Future<void> loadCourses() async {
    final result = await handleLoading(() => _repository.getCourses());
    if (result != null) {
      courses.value = result;
    }
  }
  
  void selectCategory(String categoryId) {
    selectedCategory.value = categoryId;
  }
}
```

### 4.4 é¡µé¢çŠ¶æ€ç»„ä»¶

```dart
// ç»Ÿä¸€çš„é¡µé¢çŠ¶æ€å¤„ç†
class StateView<T extends BaseController> extends GetView<T> {
  final Widget Function(T controller) builder;
  final Widget? loadingWidget;
  final Widget Function(String error)? errorBuilder;
  
  const StateView({
    required this.builder,
    this.loadingWidget,
    this.errorBuilder,
  });
  
  @override
  Widget build(BuildContext context) {
    return Obx(() {
      // åŠ è½½ä¸­
      if (controller.isLoading.value) {
        return loadingWidget ?? const AppLoading();
      }
      
      // é”™è¯¯çŠ¶æ€
      if (controller.hasError) {
        return errorBuilder?.call(controller.errorMessage.value)
            ?? AppError(
                 message: controller.errorMessage.value,
                 onRetry: () => controller.onInit(),
               );
      }
      
      // æ­£å¸¸å†…å®¹
      return builder(controller);
    });
  }
}
```

---

## äº”ã€æ¨¡å—é€šä¿¡è®¾è®¡

### 5.1 äº‹ä»¶æ€»çº¿

```dart
// å®šä¹‰äº‹ä»¶
class LearningProgressEvent {
  final String courseId;
  final double progress;
  
  LearningProgressEvent(this.courseId, this.progress);
}

class PracticeCompletedEvent {
  final String practiceType;
  final int score;
  
  PracticeCompletedEvent(this.practiceType, this.score);
}

// ä½¿ç”¨ï¼ˆåŸºäº GetX çš„ ever/onceï¼‰
class HomeController extends BaseController {
  @override
  void onInit() {
    super.onInit();
    
    // ç›‘å¬å­¦ä¹ è¿›åº¦å˜åŒ–
    ever(Get.find<CourseController>().currentProgress, (progress) {
      refreshLearningMap();
    });
  }
}
```

### 5.2 æ¨¡å—é—´ä¾èµ–å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ¨¡å—ä¾èµ–å…³ç³»å›¾                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                      â”‚    Core     â”‚                            â”‚
â”‚                      â”‚   æ ¸å¿ƒå±‚    â”‚                            â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                             â”‚                                    â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚           â–¼                 â–¼                 â–¼                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚    Course    â”‚  â”‚   Practice   â”‚  â”‚   Profile    â”‚         â”‚
â”‚   â”‚    è¯¾ç¨‹æ¨¡å—   â”‚  â”‚   ç»ƒä¹ æ¨¡å—    â”‚  â”‚  ä¸ªäººä¸­å¿ƒ    â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚          â”‚                 â”‚                 â”‚                  â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                            â–¼                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚     Home     â”‚                             â”‚
â”‚                    â”‚    é¦–é¡µæ¨¡å—   â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                 â”‚
â”‚  ä¾èµ–è§„åˆ™ï¼š                                                      â”‚
â”‚  1. æ‰€æœ‰æ¨¡å—å¯ä¾èµ– Core å±‚                                        â”‚
â”‚  2. æ¨¡å—é—´é€šè¿‡ Repository/Service æ¥å£é€šä¿¡                        â”‚
â”‚  3. Home æ¨¡å—èšåˆå…¶ä»–æ¨¡å—æ•°æ®                                     â”‚
â”‚  4. ç¦æ­¢å¾ªç¯ä¾èµ–                                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€è·¯ç”±è®¾è®¡

### 6.1 è·¯ç”±å‘½åè§„èŒƒ

```dart
// app/routes/app_routes.dart
abstract class AppRoutes {
  // åŸºç¡€é¡µé¢
  static const splash = '/splash';
  static const onboarding = '/onboarding';
  static const main = '/main';
  
  // è¯¾ç¨‹æ¨¡å—
  static const courseList = '/course/list';
  static const courseDetail = '/course/detail';
  static const lesson = '/course/lesson';
  
  // ç»ƒä¹ æ¨¡å—
  static const practiceHome = '/practice';
  static const notePractice = '/practice/note';
  static const rhythmPractice = '/practice/rhythm';
  static const pianoPractice = '/practice/piano';
  static const practiceResult = '/practice/result';
  
  // å·¥å…·æ¨¡å—
  static const piano = '/tools/piano';
  static const metronome = '/tools/metronome';
  static const sheetMusic = '/tools/sheet-music';
  
  // ä¸ªäººä¸­å¿ƒ
  static const profile = '/profile';
  static const statistics = '/profile/statistics';
  static const achievements = '/profile/achievements';
  static const settings = '/profile/settings';
}
```

### 6.2 è·¯ç”±é…ç½®

```dart
// app/routes/app_pages.dart
class AppPages {
  static final pages = [
    // å¯åŠ¨é¡µ
    GetPage(
      name: AppRoutes.splash,
      page: () => const SplashPage(),
    ),
    
    // å¼•å¯¼é¡µ
    GetPage(
      name: AppRoutes.onboarding,
      page: () => const OnboardingPage(),
      binding: OnboardingBinding(),
    ),
    
    // ä¸»é¡µï¼ˆå¸¦åº•éƒ¨å¯¼èˆªï¼‰
    GetPage(
      name: AppRoutes.main,
      page: () => const MainPage(),
      binding: MainBinding(),
    ),
    
    // è¯¾ç¨‹è¯¦æƒ…
    GetPage(
      name: AppRoutes.courseDetail,
      page: () => const CourseDetailPage(),
      binding: CourseDetailBinding(),
      transition: Transition.rightToLeft,
    ),
    
    // ç»ƒä¹ é¡µï¼ˆéœ€è¦ç™»å½•/å¼•å¯¼å®Œæˆï¼‰
    GetPage(
      name: AppRoutes.notePractice,
      page: () => const NotePracticePage(),
      binding: NotePracticeBinding(),
      middlewares: [OnboardingMiddleware()],
    ),
    
    // ...æ›´å¤šè·¯ç”±
  ];
}
```

### 6.3 è·¯ç”±ä¸­é—´ä»¶

```dart
// å¼•å¯¼å®Œæˆæ£€æŸ¥
class OnboardingMiddleware extends GetMiddleware {
  @override
  RouteSettings? redirect(String? route) {
    final storage = Get.find<StorageService>();
    final isOnboardingCompleted = storage.getBool(StorageKeys.onboardingCompleted) ?? false;
    
    if (!isOnboardingCompleted) {
      return const RouteSettings(name: AppRoutes.onboarding);
    }
    return null;
  }
}
```

---

## ä¸ƒã€æ•°æ®æµè®¾è®¡

### 7.1 æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®æµå‘                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   UI     â”‚â”€â”€â”€â–¶â”‚Controllerâ”‚â”€â”€â”€â–¶â”‚Repositoryâ”‚â”€â”€â”€â–¶â”‚  Data    â”‚ â”‚
â”‚  â”‚  ç”¨æˆ·æ“ä½œ â”‚    â”‚  ä¸šåŠ¡é€»è¾‘ â”‚    â”‚  æ•°æ®è·å– â”‚    â”‚  æ•°æ®æº   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â–²                â”‚                               â”‚        â”‚
â”‚       â”‚                â”‚                               â”‚        â”‚
â”‚       â”‚                â–¼                               â–¼        â”‚
â”‚       â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚       â”‚         â”‚  State   â”‚                   â”‚  Assets  â”‚    â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  çŠ¶æ€æ›´æ–° â”‚                   â”‚  JSON    â”‚    â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚        â”‚
â”‚                                                         â–¼        â”‚
â”‚                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                                  â”‚   Hive   â”‚   â”‚
â”‚                                                  â”‚  æœ¬åœ°å­˜å‚¨ â”‚   â”‚
â”‚                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 æ•°æ®ç¼“å­˜ç­–ç•¥

```dart
// ç¼“å­˜ç­–ç•¥æšä¸¾
enum CacheStrategy {
  networkFirst,    // ä¼˜å…ˆç½‘ç»œï¼Œå¤±è´¥ç”¨ç¼“å­˜
  cacheFirst,      // ä¼˜å…ˆç¼“å­˜ï¼Œè¿‡æœŸèµ°ç½‘ç»œ
  networkOnly,     // ä»…ç½‘ç»œ
  cacheOnly,       // ä»…ç¼“å­˜
}

// å¸¦ç¼“å­˜çš„ Repository
class CachedRepository<T> {
  final StorageService _storage;
  final String cacheKey;
  final Duration cacheDuration;
  
  Future<T?> getData({
    required Future<T> Function() fetcher,
    CacheStrategy strategy = CacheStrategy.cacheFirst,
  }) async {
    switch (strategy) {
      case CacheStrategy.cacheFirst:
        final cached = await _getCached();
        if (cached != null && !_isExpired()) {
          return cached;
        }
        final fresh = await fetcher();
        await _saveCache(fresh);
        return fresh;
        
      case CacheStrategy.networkFirst:
        try {
          final fresh = await fetcher();
          await _saveCache(fresh);
          return fresh;
        } catch (e) {
          return await _getCached();
        }
        
      // ...å…¶ä»–ç­–ç•¥
    }
  }
}
```

---

## å…«ã€éŸ³é¢‘ç³»ç»Ÿè®¾è®¡

### 8.1 éŸ³é¢‘æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        éŸ³é¢‘ç³»ç»Ÿæ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     AudioService                          â”‚  â”‚
â”‚  â”‚                     (éŸ³é¢‘æœåŠ¡æ¥å£)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                    â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚           â–¼                â–¼                â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ PianoSound   â”‚  â”‚ Metronome    â”‚  â”‚ EffectSound  â”‚         â”‚
â”‚  â”‚ é’¢ç´éŸ³è‰²     â”‚  â”‚ èŠ‚æ‹å™¨       â”‚  â”‚ æ•ˆæœéŸ³       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                 â”‚                  â”‚
â”‚         â–¼                 â–¼                 â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    AudioPlayer Pool                      â”‚  â”‚
â”‚  â”‚                    (éŸ³é¢‘æ’­æ”¾å™¨æ± )                         â”‚  â”‚
â”‚  â”‚   æ”¯æŒå¤šéŸ³åŒæ—¶æ’­æ”¾ï¼ˆå’Œå¼¦ï¼‰                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 é’¢ç´éŸ³è‰²ç®¡ç†

```dart
// éŸ³é¢‘æœåŠ¡
class PianoSoundService {
  // éŸ³é¢‘æ± ï¼ˆæ”¯æŒåŒæ—¶æ’­æ”¾å¤šä¸ªéŸ³ï¼‰
  final Map<int, AudioPlayer> _playerPool = {};
  
  // é¢„åŠ è½½éŸ³é¢‘
  Future<void> preloadSounds() async {
    // é¢„åŠ è½½å¸¸ç”¨éŸ³åŸŸ (C3-C6)
    for (int midi = 48; midi <= 84; midi++) {
      final player = AudioPlayer();
      await player.setAsset('assets/audio/piano/note_$midi.mp3');
      _playerPool[midi] = player;
    }
  }
  
  // æ’­æ”¾éŸ³ç¬¦
  Future<void> playNote(int midiNumber) async {
    final player = _playerPool[midiNumber];
    if (player != null) {
      await player.seek(Duration.zero);
      await player.play();
    }
  }
  
  // åœæ­¢éŸ³ç¬¦
  Future<void> stopNote(int midiNumber) async {
    final player = _playerPool[midiNumber];
    await player?.stop();
  }
  
  // æ’­æ”¾å’Œå¼¦
  Future<void> playChord(List<int> midiNumbers) async {
    await Future.wait(midiNumbers.map((n) => playNote(n)));
  }
}
```

---

## ä¹ã€äº”çº¿è°±æ¸²æŸ“è®¾è®¡

### 9.1 æ¸²æŸ“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      äº”çº¿è°±æ¸²æŸ“ç³»ç»Ÿ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    StaffWidget                            â”‚  â”‚
â”‚  â”‚                   (äº”çº¿è°±ç»„ä»¶)                             â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚  ClefPainter â”‚  â”‚ StaffPainterâ”‚  â”‚ NotePainter â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  è°±å·ç»˜åˆ¶    â”‚  â”‚  äº”çº¿ç»˜åˆ¶   â”‚  â”‚  éŸ³ç¬¦ç»˜åˆ¶   â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚ AccidentalP â”‚  â”‚  RestPainter â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚  å‡é™å·ç»˜åˆ¶  â”‚  â”‚  ä¼‘æ­¢ç¬¦ç»˜åˆ¶  â”‚                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  æ•°æ®æ¨¡å‹ï¼š                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  StaffData {                                              â”‚  â”‚
â”‚  â”‚    clef: Clef.treble,                                     â”‚  â”‚
â”‚  â”‚    keySignature: KeySignature.cMajor,                     â”‚  â”‚
â”‚  â”‚    timeSignature: TimeSignature(4, 4),                    â”‚  â”‚
â”‚  â”‚    notes: [NoteData(...)],                                â”‚  â”‚
â”‚  â”‚  }                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 éŸ³ç¬¦ä½ç½®è®¡ç®—

```dart
// äº”çº¿è°±é…ç½®
class StaffConfig {
  final double lineSpacing;      // çº¿é—´è·
  final double noteRadius;       // éŸ³ç¬¦åŠå¾„
  final double staffWidth;       // äº”çº¿è°±å®½åº¦
  
  // æ ¹æ® MIDI ç¼–å·è®¡ç®— Y ä½ç½®
  double getYPosition(int midiNumber, Clef clef) {
    // ä¸­å¤® C (MIDI 60) åœ¨é«˜éŸ³è°±è¡¨ä¸‹åŠ ä¸€çº¿
    // æ¯ä¸ªåŠéŸ³å¯¹åº”ç‰¹å®šä½ç½®
    final positions = _getNotePositions(clef);
    final position = positions[midiNumber % 12];
    final octaveOffset = (midiNumber ~/ 12 - 5) * 7 * lineSpacing / 2;
    
    return baseY - position * lineSpacing / 2 - octaveOffset;
  }
}
```

---

## åã€é”™è¯¯å¤„ç†è®¾è®¡

### 10.1 å¼‚å¸¸å±‚çº§

```dart
// åŸºç¡€å¼‚å¸¸
abstract class AppException implements Exception {
  final String message;
  final String? code;
  
  const AppException(this.message, {this.code});
}

// ç½‘ç»œå¼‚å¸¸
class NetworkException extends AppException {
  const NetworkException(super.message, {super.code});
}

// ä¸šåŠ¡å¼‚å¸¸
class BusinessException extends AppException {
  const BusinessException(super.message, {super.code});
}

// å­˜å‚¨å¼‚å¸¸
class StorageException extends AppException {
  const StorageException(super.message, {super.code});
}

// éŸ³é¢‘å¼‚å¸¸
class AudioException extends AppException {
  const AudioException(super.message, {super.code});
}
```

### 10.2 å…¨å±€é”™è¯¯å¤„ç†

```dart
// é”™è¯¯å¤„ç†å·¥å…·
class ErrorHandler {
  static void handle(dynamic error, {StackTrace? stackTrace}) {
    // æ—¥å¿—è®°å½•
    Logger.error('Error: $error', stackTrace: stackTrace);
    
    // ç”¨æˆ·æç¤º
    String message;
    if (error is NetworkException) {
      message = 'ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
    } else if (error is BusinessException) {
      message = error.message;
    } else {
      message = 'å‡ºäº†ç‚¹é—®é¢˜ï¼Œè¯·ç¨åé‡è¯•';
    }
    
    Get.snackbar('æç¤º', message);
  }
}
```

---

## åä¸€ã€æµ‹è¯•ç­–ç•¥

### 11.1 æµ‹è¯•é‡‘å­—å¡”

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   E2E     â”‚  ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆå°‘é‡ï¼‰
                    â”‚   Tests   â”‚  å…³é”®æµç¨‹
                   â”Œâ”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”
                   â”‚   Widget    â”‚  ç»„ä»¶æµ‹è¯•ï¼ˆä¸­ç­‰ï¼‰
                   â”‚   Tests     â”‚  UI äº¤äº’
                  â”Œâ”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”
                  â”‚     Unit      â”‚  å•å…ƒæµ‹è¯•ï¼ˆå¤§é‡ï¼‰
                  â”‚     Tests     â”‚  Service, Repository, Utils
                 â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€
```

### 11.2 æµ‹è¯•ç¤ºä¾‹

```dart
// å•å…ƒæµ‹è¯•ï¼šè¯¾ç¨‹ Repository
void main() {
  group('CourseRepository', () {
    late CourseRepository repository;
    late MockStorageService mockStorage;
    
    setUp(() {
      mockStorage = MockStorageService();
      repository = CourseRepositoryImpl(storage: mockStorage);
    });
    
    test('getCourses returns cached data when available', () async {
      // Arrange
      when(mockStorage.get('courses')).thenAnswer((_) async => mockCourses);
      
      // Act
      final result = await repository.getCourses();
      
      // Assert
      expect(result, equals(mockCourses));
      verify(mockStorage.get('courses')).called(1);
    });
  });
}
```

---

## åäºŒã€æ€§èƒ½ä¼˜åŒ–

### 12.1 ä¼˜åŒ–ç­–ç•¥

| åœºæ™¯ | ä¼˜åŒ–æ–¹æ¡ˆ |
|------|---------|
| **åˆ—è¡¨æ¸²æŸ“** | ListView.builder æ‡’åŠ è½½ |
| **å›¾ç‰‡åŠ è½½** | cached_network_image ç¼“å­˜ |
| **éŸ³é¢‘é¢„åŠ è½½** | å¸¸ç”¨éŸ³åŸŸæå‰åŠ è½½åˆ°å†…å­˜ |
| **äº”çº¿è°±æ¸²æŸ“** | RepaintBoundary éš”ç¦»é‡ç»˜ |
| **çŠ¶æ€æ›´æ–°** | ç»†ç²’åº¦ Obxï¼Œé¿å…å¤§èŒƒå›´åˆ·æ–° |
| **é¡µé¢åˆ‡æ¢** | åˆç†ä½¿ç”¨ const æ„é€ å‡½æ•° |

### 12.2 å†…å­˜ç®¡ç†

```dart
// Controller ç”Ÿå‘½å‘¨æœŸç®¡ç†
class PracticeController extends BaseController {
  late AudioService _audioService;
  
  @override
  void onInit() {
    super.onInit();
    _audioService = Get.find();
    _audioService.preloadSounds();  // é¢„åŠ è½½
  }
  
  @override
  void onClose() {
    _audioService.dispose();  // é‡Šæ”¾èµ„æº
    super.onClose();
  }
}
```

---

## åä¸‰ã€ä»£ç è§„èŒƒ

### 13.1 æ–‡ä»¶å‘½å

| ç±»å‹ | å‘½åè§„åˆ™ | ç¤ºä¾‹ |
|------|---------|------|
| æ–‡ä»¶ | å°å†™ + ä¸‹åˆ’çº¿ | `course_controller.dart` |
| ç±» | å¤§é©¼å³° | `CourseController` |
| å˜é‡ | å°é©¼å³° | `courseList` |
| å¸¸é‡ | å°é©¼å³° | `defaultPageSize` |
| ç§æœ‰ | ä¸‹åˆ’çº¿å‰ç¼€ | `_isLoading` |

### 13.2 ç›®å½•è§„èŒƒ

```
æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç›®å½•ç»“æ„ï¼š
feature_name/
â”œâ”€â”€ bindings/           # ä¾èµ–ç»‘å®šï¼ˆ1ä¸ªæ–‡ä»¶ï¼‰
â”œâ”€â”€ controllers/        # æ§åˆ¶å™¨ï¼ˆå¯å¤šä¸ªï¼‰
â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”œâ”€â”€ repositories/      # æ•°æ®ä»“å‚¨ï¼ˆæ¥å£+å®ç°ï¼‰
â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â””â”€â”€ views/             # é¡µé¢å’Œç»„ä»¶
    â”œâ”€â”€ xxx_page.dart
    â””â”€â”€ widgets/       # é¡µé¢ç§æœ‰ç»„ä»¶
```

### 13.3 æ³¨é‡Šè§„èŒƒ

```dart
/// è¯¾ç¨‹æ§åˆ¶å™¨
/// 
/// è´Ÿè´£è¯¾ç¨‹åˆ—è¡¨çš„åŠ è½½ã€ç­›é€‰å’ŒçŠ¶æ€ç®¡ç†
class CourseController extends BaseController {
  /// åŠ è½½è¯¾ç¨‹åˆ—è¡¨
  /// 
  /// [forceRefresh] æ˜¯å¦å¼ºåˆ¶åˆ·æ–°ï¼ˆå¿½ç•¥ç¼“å­˜ï¼‰
  Future<void> loadCourses({bool forceRefresh = false}) async {
    // ...
  }
}
```

---

## åå››ã€æ–‡æ¡£æ¸…å•

| æ–‡æ¡£ | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| æ¶æ„è®¾è®¡æ–‡æ¡£.md | è„šæ‰‹æ¶æ¶æ„ï¼ˆé€šç”¨ï¼‰ | âœ… å®Œæˆ |
| äº§å“è®¾è®¡æ–‡æ¡£.md | ä¹ç†é€š App äº§å“è®¾è®¡ | âœ… å®Œæˆ |
| åº”ç”¨æ¶æ„è®¾è®¡æ–‡æ¡£.md | ä¹ç†é€š App æŠ€æœ¯æ¶æ„ | âœ… å®Œæˆ |
| API æ–‡æ¡£ | æ¥å£å®šä¹‰ï¼ˆå¦‚éœ€åç«¯ï¼‰ | ğŸ“ å¾…å®š |
| ç»„ä»¶æ–‡æ¡£ | é€šç”¨ç»„ä»¶ä½¿ç”¨è¯´æ˜ | ğŸ“ å¼€å‘æ—¶è¡¥å…… |

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*  
*æ›´æ–°æ—¶é—´ï¼š2024å¹´*

